---
title: Module `0x2::object_table`
---
import Link from '@docusaurus/Link';

<Link id="0x2_object_table"/>
Similar to <code>
iota::table</code>, an <code>
<Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;</code> is a map-like collection. But unlike
<code>
iota::table</code>, the values bound to these dynamic fields _must_ be objects themselves. This allows
for the objects to still exist within in storage, which may be important for external tools.
The difference is otherwise not observable from within Move.


-  [Resource `ObjectTable`](#0x2_object_table_ObjectTable)
-  [Constants](#@Constants_0)
-  [Function `new`](#0x2_object_table_new)
-  [Function `add`](#0x2_object_table_add)
-  [Function `borrow`](#0x2_object_table_borrow)
-  [Function `borrow_mut`](#0x2_object_table_borrow_mut)
-  [Function `remove`](#0x2_object_table_remove)
-  [Function `contains`](#0x2_object_table_contains)
-  [Function `length`](#0x2_object_table_length)
-  [Function `is_empty`](#0x2_object_table_is_empty)
-  [Function `destroy_empty`](#0x2_object_table_destroy_empty)
-  [Function `value_id`](#0x2_object_table_value_id)


<pre><code>
<b>use</b> <Link to="../move-stdlib/option#0x1_option">0x1::option</Link>;
<b>use</b> <Link to="dynamic_object_field#0x2_dynamic_object_field">0x2::dynamic_object_field</Link>;
<b>use</b> <Link to="object#0x2_object">0x2::object</Link>;
<b>use</b> <Link to="tx_context#0x2_tx_context">0x2::tx_context</Link>;
</code></pre>



<Link id="0x2_object_table_ObjectTable"></Link>

## Resource `ObjectTable`



<pre><code>
<b>struct</b> <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt; <b>has</b> store, key
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
id: <Link to="object#0x2_object_UID">object::UID</Link></code>
</dt>
<dd>
 the ID of this table
</dd>
<dt>
<code>
size: u64</code>
</dt>
<dd>
 the number of key-value pairs in the table
</dd>
</dl>


</details>

<Link id="@Constants_0"></Link>

## Constants


<Link id="0x2_object_table_ETableNotEmpty"></Link>



<pre><code>
<b>const</b> <Link to="object_table#0x2_object_table_ETableNotEmpty">ETableNotEmpty</Link>: u64 = 0;
</code></pre>



<Link id="0x2_object_table_new"></Link>

## Function `new`

Creates a new, empty table


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_new">new</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt;(ctx: &<b>mut</b> <Link to="tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="object_table#0x2_object_table_ObjectTable">object_table::ObjectTable</Link>&lt;K, V&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_new">new</Link>&lt;K: <b>copy</b> + drop + store, V: key + store&gt;(ctx: &<b>mut</b> TxContext): <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt; \{
    <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link> \{
        id: <Link to="object#0x2_object_new">object::new</Link>(ctx),
        size: 0,
    }
}
</code></pre>



</details>

<Link id="0x2_object_table_add"></Link>

## Function `add`

Adds a key-value pair to the table <code>
<Link to="table#0x2_table">table</Link>: &<b>mut</b> <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;</code>
Aborts with <code>
iota::dynamic_field::EFieldAlreadyExists</code> if the table already has an entry with
that key <code>
k: K</code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_add">add</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt;(<Link to="table#0x2_table">table</Link>: &<b>mut</b> <Link to="object_table#0x2_object_table_ObjectTable">object_table::ObjectTable</Link>&lt;K, V&gt;, k: K, v: V)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_add">add</Link>&lt;K: <b>copy</b> + drop + store, V: key + store&gt;(<Link to="table#0x2_table">table</Link>: &<b>mut</b> <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;, k: K, v: V) \{
    ofield::add(&<b>mut</b> <Link to="table#0x2_table">table</Link>.id, k, v);
    <Link to="table#0x2_table">table</Link>.size = <Link to="table#0x2_table">table</Link>.size + 1;
}
</code></pre>



</details>

<Link id="0x2_object_table_borrow"></Link>

## Function `borrow`

Immutable borrows the value associated with the key in the table <code>
<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;</code>.
Aborts with <code>
iota::dynamic_field::EFieldDoesNotExist</code> if the table does not have an entry with
that key <code>
k: K</code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="borrow#0x2_borrow">borrow</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt;(<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">object_table::ObjectTable</Link>&lt;K, V&gt;, k: K): &V
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="borrow#0x2_borrow">borrow</Link>&lt;K: <b>copy</b> + drop + store, V: key + store&gt;(<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;, k: K): &V \{
    ofield::borrow(&<Link to="table#0x2_table">table</Link>.id, k)
}
</code></pre>



</details>

<Link id="0x2_object_table_borrow_mut"></Link>

## Function `borrow_mut`

Mutably borrows the value associated with the key in the table <code>
<Link to="table#0x2_table">table</Link>: &<b>mut</b> <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;</code>.
Aborts with <code>
iota::dynamic_field::EFieldDoesNotExist</code> if the table does not have an entry with
that key <code>
k: K</code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_borrow_mut">borrow_mut</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt;(<Link to="table#0x2_table">table</Link>: &<b>mut</b> <Link to="object_table#0x2_object_table_ObjectTable">object_table::ObjectTable</Link>&lt;K, V&gt;, k: K): &<b>mut</b> V
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_borrow_mut">borrow_mut</Link>&lt;K: <b>copy</b> + drop + store, V: key + store&gt;(
    <Link to="table#0x2_table">table</Link>: &<b>mut</b> <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;,
    k: K,
): &<b>mut</b> V \{
    ofield::borrow_mut(&<b>mut</b> <Link to="table#0x2_table">table</Link>.id, k)
}
</code></pre>



</details>

<Link id="0x2_object_table_remove"></Link>

## Function `remove`

Removes the key-value pair in the table <code>
<Link to="table#0x2_table">table</Link>: &<b>mut</b> <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;</code> and returns the value.
Aborts with <code>
iota::dynamic_field::EFieldDoesNotExist</code> if the table does not have an entry with
that key <code>
k: K</code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_remove">remove</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt;(<Link to="table#0x2_table">table</Link>: &<b>mut</b> <Link to="object_table#0x2_object_table_ObjectTable">object_table::ObjectTable</Link>&lt;K, V&gt;, k: K): V
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_remove">remove</Link>&lt;K: <b>copy</b> + drop + store, V: key + store&gt;(<Link to="table#0x2_table">table</Link>: &<b>mut</b> <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;, k: K): V \{
    <b>let</b> v = ofield::remove(&<b>mut</b> <Link to="table#0x2_table">table</Link>.id, k);
    <Link to="table#0x2_table">table</Link>.size = <Link to="table#0x2_table">table</Link>.size - 1;
    v
}
</code></pre>



</details>

<Link id="0x2_object_table_contains"></Link>

## Function `contains`

Returns true iff there is a value associated with the key <code>
k: K</code> in table
<code>
<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;</code>


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_contains">contains</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt;(<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">object_table::ObjectTable</Link>&lt;K, V&gt;, k: K): bool
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_contains">contains</Link>&lt;K: <b>copy</b> + drop + store, V: key + store&gt;(<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;, k: K): bool \{
    ofield::exists_&lt;K&gt;(&<Link to="table#0x2_table">table</Link>.id, k)
}
</code></pre>



</details>

<Link id="0x2_object_table_length"></Link>

## Function `length`

Returns the size of the table, the number of key-value pairs


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_length">length</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt;(<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">object_table::ObjectTable</Link>&lt;K, V&gt;): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_length">length</Link>&lt;K: <b>copy</b> + drop + store, V: key + store&gt;(<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;): u64 \{
    <Link to="table#0x2_table">table</Link>.size
}
</code></pre>



</details>

<Link id="0x2_object_table_is_empty"></Link>

## Function `is_empty`

Returns true iff the table is empty (if <code>
length</code> returns <code>
0</code>)


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_is_empty">is_empty</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt;(<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">object_table::ObjectTable</Link>&lt;K, V&gt;): bool
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_is_empty">is_empty</Link>&lt;K: <b>copy</b> + drop + store, V: key + store&gt;(<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;): bool \{
    <Link to="table#0x2_table">table</Link>.size == 0
}
</code></pre>



</details>

<Link id="0x2_object_table_destroy_empty"></Link>

## Function `destroy_empty`

Destroys an empty table
Aborts with <code>
<Link to="object_table#0x2_object_table_ETableNotEmpty">ETableNotEmpty</Link></code> if the table still contains values


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_destroy_empty">destroy_empty</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt;(<Link to="table#0x2_table">table</Link>: <Link to="object_table#0x2_object_table_ObjectTable">object_table::ObjectTable</Link>&lt;K, V&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_destroy_empty">destroy_empty</Link>&lt;K: <b>copy</b> + drop + store, V: key + store&gt;(<Link to="table#0x2_table">table</Link>: <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;) \{
    <b>let</b> <Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link> \{ id, size } = <Link to="table#0x2_table">table</Link>;
    <b>assert</b>!(size == 0, <Link to="object_table#0x2_object_table_ETableNotEmpty">ETableNotEmpty</Link>);
    id.delete()
}
</code></pre>



</details>

<Link id="0x2_object_table_value_id"></Link>

## Function `value_id`

Returns the ID of the object associated with the key if the table has an entry with key <code>
k: K</code>
Returns none otherwise


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_value_id">value_id</Link>&lt;K: <b>copy</b>, drop, store, V: store, key&gt;(<Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">object_table::ObjectTable</Link>&lt;K, V&gt;, k: K): <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="object#0x2_object_ID">object::ID</Link>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="object_table#0x2_object_table_value_id">value_id</Link>&lt;K: <b>copy</b> + drop + store, V: key + store&gt;(
    <Link to="table#0x2_table">table</Link>: &<Link to="object_table#0x2_object_table_ObjectTable">ObjectTable</Link>&lt;K, V&gt;,
    k: K,
): Option&lt;ID&gt; \{
    ofield::id(&<Link to="table#0x2_table">table</Link>.id, k)
}
</code></pre>



</details>
