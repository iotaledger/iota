---
title: Module `0x2::poseidon`
---
import Link from '@docusaurus/Link';

<Link id="0x2_poseidon"/>
Module which defines instances of the poseidon hash functions.


-  [Constants](#@Constants_0)
-  [Function `poseidon_bn254`](#0x2_poseidon_poseidon_bn254)
-  [Function `poseidon_bn254_internal`](#0x2_poseidon_poseidon_bn254_internal)


<pre><code>
<b>use</b> <Link href="bcs#0x2_bcs">0x2::bcs</Link>;
</code></pre>



<Link id="@Constants_0"></Link>

## Constants


<Link id="0x2_poseidon_BN254_MAX"></Link>

The field size for BN254 curve.


<pre><code>
<b>const</b> <Link href="poseidon#0x2_poseidon_BN254_MAX">BN254_MAX</Link>: u256 = 21888242871839275222246405745257275088548364400416034343698204186575808495617;
</code></pre>



<Link id="0x2_poseidon_EEmptyInput"></Link>

Error if an empty vector is passed as input.


<pre><code>
<b>const</b> <Link href="poseidon#0x2_poseidon_EEmptyInput">EEmptyInput</Link>: u64 = 1;
</code></pre>



<Link id="0x2_poseidon_ENonCanonicalInput"></Link>

Error if any of the inputs are larger than or equal to the BN254 field size.


<pre><code>
<b>const</b> <Link href="poseidon#0x2_poseidon_ENonCanonicalInput">ENonCanonicalInput</Link>: u64 = 0;
</code></pre>



<Link id="0x2_poseidon_poseidon_bn254"></Link>

## Function `poseidon_bn254`

@param data: Vector of BN254 field elements to hash.

Hash the inputs using poseidon_bn254 and returns a BN254 field element.

Each element has to be a BN254 field element in canonical representation so it must be smaller than the BN254
scalar field size which is 21888242871839275222246405745257275088548364400416034343698204186575808495617.


<pre><code>
<b>public</b> <b>fun</b> <Link href="poseidon#0x2_poseidon_poseidon_bn254">poseidon_bn254</Link>(data: &<Link href="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u256&gt;): u256
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link href="poseidon#0x2_poseidon_poseidon_bn254">poseidon_bn254</Link>(data: &<Link href="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u256&gt;): u256 \{
    <b>let</b> (<b>mut</b> i, <b>mut</b> b, l) = (0, <Link href="../move-stdlib/vector#0x1_vector">vector</Link>[], data.length());
    <b>assert</b>!(l &gt; 0, <Link href="poseidon#0x2_poseidon_EEmptyInput">EEmptyInput</Link>);
    <b>while</b> (i &lt; l) \{
        <b>let</b> field_element = &data[i];
        <b>assert</b>!(*field_element &lt; <Link href="poseidon#0x2_poseidon_BN254_MAX">BN254_MAX</Link>, <Link href="poseidon#0x2_poseidon_ENonCanonicalInput">ENonCanonicalInput</Link>);
        b.push_back(<Link href="../move-stdlib/bcs#0x1_bcs_to_bytes">bcs::to_bytes</Link>(&data[i]));
        i = i + 1;
    };
    <b>let</b> binary_output = <Link href="poseidon#0x2_poseidon_poseidon_bn254_internal">poseidon_bn254_internal</Link>(&b);
    bcs::new(binary_output).peel_u256()
}
</code></pre>



</details>

<Link id="0x2_poseidon_poseidon_bn254_internal"></Link>

## Function `poseidon_bn254_internal`

@param data: Vector of BN254 field elements in little-endian representation.

Hash the inputs using poseidon_bn254 and returns a BN254 field element in little-endian representation.


<pre><code>
<b>fun</b> <Link href="poseidon#0x2_poseidon_poseidon_bn254_internal">poseidon_bn254_internal</Link>(data: &<Link href="../move-stdlib/vector#0x1_vector">vector</Link>&lt;<Link href="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;): <Link href="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>native</b> <b>fun</b> <Link href="poseidon#0x2_poseidon_poseidon_bn254_internal">poseidon_bn254_internal</Link>(data: &<Link href="../move-stdlib/vector#0x1_vector">vector</Link>&lt;<Link href="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;): <Link href="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;;
</code></pre>



</details>
