---
title: Module 0x2::balance
sidebar_label: balance
---
import Link from '@docusaurus/Link';

<Link id="0x2_balance"/>
A storable handler for Balances in general. Is used in the <code>
Coin</code>
module to allow balance operations and can be used to implement
custom coins with <code>
<Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link></code> and <code>
<Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link></code>s.


-  [Struct `Supply`](#0x2_balance_Supply)
-  [Struct `Balance`](#0x2_balance_Balance)
-  [Constants](#@Constants_0)
-  [Function `value`](#0x2_balance_value)
-  [Function `supply_value`](#0x2_balance_supply_value)
-  [Function `create_supply`](#0x2_balance_create_supply)
-  [Function `increase_supply`](#0x2_balance_increase_supply)
-  [Function `decrease_supply`](#0x2_balance_decrease_supply)
-  [Function `zero`](#0x2_balance_zero)
-  [Function `join`](#0x2_balance_join)
-  [Function `split`](#0x2_balance_split)
-  [Function `withdraw_all`](#0x2_balance_withdraw_all)
-  [Function `destroy_zero`](#0x2_balance_destroy_zero)
-  [Function `create_staking_rewards`](#0x2_balance_create_staking_rewards)
-  [Function `destroy_storage_rebates`](#0x2_balance_destroy_storage_rebates)
-  [Function `destroy_genesis_supply`](#0x2_balance_destroy_genesis_supply)
-  [Function `destroy_supply`](#0x2_balance_destroy_supply)


<pre><code>
<b>use</b> <Link to="../iota-framework/tx_context#0x2_tx_context">0x2::tx_context</Link>;
</code></pre>



<Link id="0x2_balance_Supply"></Link>

## Struct `Supply`

A Supply of T. Used for minting and burning.
Wrapped into a <code>
TreasuryCap</code> in the <code>
Coin</code> module.


<pre><code>
<b>struct</b> <Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link>&lt;T&gt; <b>has</b> store
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
value: u64</code>
</dt>
<dd>

</dd>
</dl>


</details>

<Link id="0x2_balance_Balance"></Link>

## Struct `Balance`

Storable balance - an inner struct of a Coin type.
Can be used to store coins which don't need the key ability.


<pre><code>
<b>struct</b> <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt; <b>has</b> store
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
value: u64</code>
</dt>
<dd>

</dd>
</dl>


</details>

<Link id="@Constants_0"></Link>

## Constants


<Link id="0x2_balance_ENotSystemAddress"></Link>

Sender is not @0x0 the system address.


<pre><code>
<b>const</b> <Link to="../iota-framework/balance#0x2_balance_ENotSystemAddress">ENotSystemAddress</Link>: u64 = 3;
</code></pre>



<Link id="0x2_balance_ENonZero"></Link>

For when trying to destroy a non-zero balance.


<pre><code>
<b>const</b> <Link to="../iota-framework/balance#0x2_balance_ENonZero">ENonZero</Link>: u64 = 0;
</code></pre>



<Link id="0x2_balance_ENotEnough"></Link>

For when trying to withdraw more than there is.


<pre><code>
<b>const</b> <Link to="../iota-framework/balance#0x2_balance_ENotEnough">ENotEnough</Link>: u64 = 2;
</code></pre>



<Link id="0x2_balance_ENotGenesisEpoch"></Link>

Epoch is not 0 (the genesis epoch).


<pre><code>
<b>const</b> <Link to="../iota-framework/balance#0x2_balance_ENotGenesisEpoch">ENotGenesisEpoch</Link>: u64 = 4;
</code></pre>



<Link id="0x2_balance_EOverflow"></Link>

For when an overflow is happening on Supply operations.


<pre><code>
<b>const</b> <Link to="../iota-framework/balance#0x2_balance_EOverflow">EOverflow</Link>: u64 = 1;
</code></pre>



<Link id="0x2_balance_value"></Link>

## Function `value`

Get the amount stored in a <code>
<Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link></code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_value">value</Link>&lt;T&gt;(self: &<Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_value">value</Link>&lt;T&gt;(self: &<Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt;): u64 \{
    self.value
}
</code></pre>



</details>

<Link id="0x2_balance_supply_value"></Link>

## Function `supply_value`

Get the <code>
<Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link></code> value.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_supply_value">supply_value</Link>&lt;T&gt;(supply: &<Link to="../iota-framework/balance#0x2_balance_Supply">balance::Supply</Link>&lt;T&gt;): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_supply_value">supply_value</Link>&lt;T&gt;(supply: &<Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link>&lt;T&gt;): u64 \{
    supply.value
}
</code></pre>



</details>

<Link id="0x2_balance_create_supply"></Link>

## Function `create_supply`

Create a new supply for type T.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_create_supply">create_supply</Link>&lt;T: drop&gt;(_: T): <Link to="../iota-framework/balance#0x2_balance_Supply">balance::Supply</Link>&lt;T&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_create_supply">create_supply</Link>&lt;T: drop&gt;(_: T): <Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link>&lt;T&gt; \{
    <Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link> \{ value: 0 }
}
</code></pre>



</details>

<Link id="0x2_balance_increase_supply"></Link>

## Function `increase_supply`

Increase supply by <code>
value</code> and create a new <code>
<Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt;</code> with this value.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_increase_supply">increase_supply</Link>&lt;T&gt;(self: &<b>mut</b> <Link to="../iota-framework/balance#0x2_balance_Supply">balance::Supply</Link>&lt;T&gt;, value: u64): <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_increase_supply">increase_supply</Link>&lt;T&gt;(self: &<b>mut</b> <Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link>&lt;T&gt;, value: u64): <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt; \{
    <b>assert</b>!(<Link to="../iota-framework/balance#0x2_balance_value">value</Link> &lt; (18446744073709551615u64 - self.value), <Link to="../iota-framework/balance#0x2_balance_EOverflow">EOverflow</Link>);
    self.value = self.value + value;
    <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link> \{ value }
}
</code></pre>



</details>

<Link id="0x2_balance_decrease_supply"></Link>

## Function `decrease_supply`

Burn a `Balance<T>` and decrease `Supply<T>`.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_decrease_supply">decrease_supply</Link>&lt;T&gt;(self: &<b>mut</b> <Link to="../iota-framework/balance#0x2_balance_Supply">balance::Supply</Link>&lt;T&gt;, <Link to="../iota-framework/balance#0x2_balance">balance</Link>: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_decrease_supply">decrease_supply</Link>&lt;T&gt;(self: &<b>mut</b> <Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link>&lt;T&gt;, <Link to="../iota-framework/balance#0x2_balance">balance</Link>: <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt;): u64 \{
    <b>let</b> <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link> \{ value } = <Link to="../iota-framework/balance#0x2_balance">balance</Link>;
    <b>assert</b>!(self.value &gt;= value, <Link to="../iota-framework/balance#0x2_balance_EOverflow">EOverflow</Link>);
    self.value = self.value - value;
    value
}
</code></pre>



</details>

<Link id="0x2_balance_zero"></Link>

## Function `zero`

Create a zero <code>
<Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link></code> for type <code>
T</code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_zero">zero</Link>&lt;T&gt;(): <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_zero">zero</Link>&lt;T&gt;(): <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt; \{
    <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link> \{ value: 0 }
}
</code></pre>



</details>

<Link id="0x2_balance_join"></Link>

## Function `join`

Join two balances together.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_join">join</Link>&lt;T&gt;(self: &<b>mut</b> <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;, <Link to="../iota-framework/balance#0x2_balance">balance</Link>: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_join">join</Link>&lt;T&gt;(self: &<b>mut</b> <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt;, <Link to="../iota-framework/balance#0x2_balance">balance</Link>: <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt;): u64 \{
    <b>let</b> <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link> \{ value } = <Link to="../iota-framework/balance#0x2_balance">balance</Link>;
    self.value = self.value + value;
    self.value
}
</code></pre>



</details>

<Link id="0x2_balance_split"></Link>

## Function `split`

Split a <code>
<Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link></code> and take a sub balance from it.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_split">split</Link>&lt;T&gt;(self: &<b>mut</b> <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;, value: u64): <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_split">split</Link>&lt;T&gt;(self: &<b>mut</b> <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt;, value: u64): <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt; \{
    <b>assert</b>!(self.value &gt;= value, <Link to="../iota-framework/balance#0x2_balance_ENotEnough">ENotEnough</Link>);
    self.value = self.value - value;
    <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link> \{ value }
}
</code></pre>



</details>

<Link id="0x2_balance_withdraw_all"></Link>

## Function `withdraw_all`

Withdraw all balance. After this the remaining balance must be 0.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_withdraw_all">withdraw_all</Link>&lt;T&gt;(self: &<b>mut</b> <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;): <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_withdraw_all">withdraw_all</Link>&lt;T&gt;(self: &<b>mut</b> <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt;): <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt; \{
    <b>let</b> value = self.value;
    <Link to="../iota-framework/balance#0x2_balance_split">split</Link>(self, value)
}
</code></pre>



</details>

<Link id="0x2_balance_destroy_zero"></Link>

## Function `destroy_zero`

Destroy a zero <code>
<Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link></code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_destroy_zero">destroy_zero</Link>&lt;T&gt;(<Link to="../iota-framework/balance#0x2_balance">balance</Link>: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_destroy_zero">destroy_zero</Link>&lt;T&gt;(<Link to="../iota-framework/balance#0x2_balance">balance</Link>: <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt;) \{
    <b>assert</b>!(<Link to="../iota-framework/balance#0x2_balance">balance</Link>.value == 0, <Link to="../iota-framework/balance#0x2_balance_ENonZero">ENonZero</Link>);
    <b>let</b> <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link> \{ value: _ } = <Link to="../iota-framework/balance#0x2_balance">balance</Link>;
}
</code></pre>



</details>

<Link id="0x2_balance_create_staking_rewards"></Link>

## Function `create_staking_rewards`

CAUTION: this function creates a <code>
<Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link></code> without increasing the supply.
It should only be called by the epoch change system txn to create staking rewards,
and nowhere else.


<pre><code>
<b>fun</b> <Link to="../iota-framework/balance#0x2_balance_create_staking_rewards">create_staking_rewards</Link>&lt;T&gt;(value: u64, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="../iota-framework/balance#0x2_balance_create_staking_rewards">create_staking_rewards</Link>&lt;T&gt;(value: u64, ctx: &TxContext): <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt; \{
    <b>assert</b>!(ctx.sender() == @0x0, <Link to="../iota-framework/balance#0x2_balance_ENotSystemAddress">ENotSystemAddress</Link>);
    <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link> \{ value }
}
</code></pre>



</details>

<Link id="0x2_balance_destroy_storage_rebates"></Link>

## Function `destroy_storage_rebates`

CAUTION: this function destroys a <code>
<Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link></code> without decreasing the supply.
It should only be called by the epoch change system txn to destroy storage rebates,
and nowhere else.


<pre><code>
<b>fun</b> <Link to="../iota-framework/balance#0x2_balance_destroy_storage_rebates">destroy_storage_rebates</Link>&lt;T&gt;(self: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="../iota-framework/balance#0x2_balance_destroy_storage_rebates">destroy_storage_rebates</Link>&lt;T&gt;(self: <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt;, ctx: &TxContext) \{
    <b>assert</b>!(ctx.sender() == @0x0, <Link to="../iota-framework/balance#0x2_balance_ENotSystemAddress">ENotSystemAddress</Link>);
    <b>let</b> <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link> \{ value: _ } = self;
}
</code></pre>



</details>

<Link id="0x2_balance_destroy_genesis_supply"></Link>

## Function `destroy_genesis_supply`

CAUTION: this function destroys a <code>
<Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link></code> without decreasing the supply.
It should only be called by the genesis txn to destroy parts of the IOTA supply
which was created during the migration and for no other reason.


<pre><code>
<b>fun</b> <Link to="../iota-framework/balance#0x2_balance_destroy_genesis_supply">destroy_genesis_supply</Link>&lt;T&gt;(self: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="../iota-framework/balance#0x2_balance_destroy_genesis_supply">destroy_genesis_supply</Link>&lt;T&gt;(self: <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link>&lt;T&gt;, ctx: &TxContext) \{
    <b>assert</b>!(ctx.sender() == @0x0, <Link to="../iota-framework/balance#0x2_balance_ENotSystemAddress">ENotSystemAddress</Link>);
    <b>assert</b>!(ctx.epoch() == 0, <Link to="../iota-framework/balance#0x2_balance_ENotGenesisEpoch">ENotGenesisEpoch</Link>);

    <b>let</b> <Link to="../iota-framework/balance#0x2_balance_Balance">Balance</Link> \{ value: _ } = self;
}
</code></pre>



</details>

<Link id="0x2_balance_destroy_supply"></Link>

## Function `destroy_supply`

Destroy a <code>
<Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link></code> preventing any further minting and burning.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_destroy_supply">destroy_supply</Link>&lt;T&gt;(self: <Link to="../iota-framework/balance#0x2_balance_Supply">balance::Supply</Link>&lt;T&gt;): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="../iota-framework/balance#0x2_balance_destroy_supply">destroy_supply</Link>&lt;T&gt;(self: <Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link>&lt;T&gt;): u64 \{
    <b>let</b> <Link to="../iota-framework/balance#0x2_balance_Supply">Supply</Link> \{ value } = self;
    value
}
</code></pre>



</details>
