---
title: Module 0x2::clock
sidebar_label: clock
---
import Link from '@docusaurus/Link';

<Link id="0x2_clock"/>
APIs for accessing time from move calls, via the 
<Link to="../iota-framework/clock#0x2_clock_Clock">Clock</Link>: a unique
shared object that is created at 0x6 during genesis.


-  [Resource `Clock`](#0x2_clock_Clock)
-  [Constants](#@Constants_0)
-  [Function `timestamp_ms`](#0x2_clock_timestamp_ms)
-  [Function `create`](#0x2_clock_create)
-  [Function `consensus_commit_prologue`](#0x2_clock_consensus_commit_prologue)


<pre><code>
<b>use</b> <Link to="../iota-framework/object#0x2_object">0x2::object</Link>;
<b>use</b> <Link to="../iota-framework/transfer#0x2_transfer">0x2::transfer</Link>;
<b>use</b> <Link to="../iota-framework/tx_context#0x2_tx_context">0x2::tx_context</Link>;
</code></pre>



<Link id="0x2_clock_Clock"></Link>

## Resource `Clock`

Singleton shared object that exposes time to Move calls.  This
object is found at address 0x6, and can only be read (accessed
via an immutable reference) by entry functions.

Entry Functions that attempt to accept 
<Link to="../iota-framework/clock#0x2_clock_Clock">Clock</Link> by mutable
reference or value will fail to verify, and honest validators
will not sign or execute transactions that use 
<Link to="../iota-framework/clock#0x2_clock_Clock">Clock</Link> as an
input parameter, unless it is passed by immutable reference.


<pre><code>
<b>struct</b> <Link to="../iota-framework/clock#0x2_clock_Clock">Clock</Link> <b>has</b> key
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>

id: <Link to="../iota-framework/object#0x2_object_UID">object::UID</Link>
</dt>
<dd>

</dd>
<dt>

timestamp_ms: u64
</dt>
<dd>
 The clock's timestamp, which is set automatically by a
 system transaction every time consensus commits a
 schedule, or by 
iota::clock::increment_for_testing during
 testing.
</dd>
</dl>


</details>

<Link id="@Constants_0"></Link>

## Constants


<Link id="0x2_clock_ENotSystemAddress"></Link>

Sender is not @0x0 the system address.


<pre><code>
<b>const</b> <Link to="../iota-framework/clock#0x2_clock_ENotSystemAddress">ENotSystemAddress</Link>: u64 = 0;
</code></pre>



<Link id="0x2_clock_timestamp_ms"></Link>

## Function `timestamp_ms`

The 
<Link to="../iota-framework/clock#0x2_clock">clock</Link>'s current timestamp as a running total of
milliseconds since an arbitrary point in the past.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/clock#0x2_clock_timestamp_ms">timestamp_ms</Link>(<Link to="../iota-framework/clock#0x2_clock">clock</Link>: &<Link to="../iota-framework/clock#0x2_clock_Clock">clock::Clock</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/clock#0x2_clock_timestamp_ms">timestamp_ms</Link>(<Link to="../iota-framework/clock#0x2_clock">clock</Link>: &<Link to="../iota-framework/clock#0x2_clock_Clock">Clock</Link>): u64 \{
    <Link to="../iota-framework/clock#0x2_clock">clock</Link>.timestamp_ms
}
</code></pre>



</details>

<Link id="0x2_clock_create"></Link>

## Function `create`

Create and share the singleton Clock -- this function is
called exactly once, during genesis.


<pre><code>
<b>fun</b> <Link to="../iota-framework/clock#0x2_clock_create">create</Link>(ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="../iota-framework/clock#0x2_clock_create">create</Link>(ctx: &TxContext) \{
    <b>assert</b>!(ctx.sender() == @0x0, <Link to="../iota-framework/clock#0x2_clock_ENotSystemAddress">ENotSystemAddress</Link>);

    <Link to="../iota-framework/transfer#0x2_transfer_share_object">transfer::share_object</Link>(<Link to="../iota-framework/clock#0x2_clock_Clock">Clock</Link> \{
        id: <Link to="../iota-framework/object#0x2_object_clock">object::clock</Link>(),
        // Initialised <b>to</b> zero, but set <b>to</b> a real timestamp by a
        // system transaction before it can be witnessed by a <b>move</b>
        // call.
        timestamp_ms: 0,
    })
}
</code></pre>



</details>

<Link id="0x2_clock_consensus_commit_prologue"></Link>

## Function `consensus_commit_prologue`



<pre><code>
<b>fun</b> <Link to="../iota-framework/clock#0x2_clock_consensus_commit_prologue">consensus_commit_prologue</Link>(<Link to="../iota-framework/clock#0x2_clock">clock</Link>: &<b>mut</b> <Link to="../iota-framework/clock#0x2_clock_Clock">clock::Clock</Link>, timestamp_ms: u64, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="../iota-framework/clock#0x2_clock_consensus_commit_prologue">consensus_commit_prologue</Link>(
    <Link to="../iota-framework/clock#0x2_clock">clock</Link>: &<b>mut</b> <Link to="../iota-framework/clock#0x2_clock_Clock">Clock</Link>,
    timestamp_ms: u64,
    ctx: &TxContext,
) \{
    // Validator will make a special system call <b>with</b> sender set <b>as</b> 0x0.
    <b>assert</b>!(ctx.sender() == @0x0, <Link to="../iota-framework/clock#0x2_clock_ENotSystemAddress">ENotSystemAddress</Link>);

    <Link to="../iota-framework/clock#0x2_clock">clock</Link>.timestamp_ms = timestamp_ms
}
</code></pre>



</details>
