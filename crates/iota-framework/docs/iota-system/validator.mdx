---
title: Module `0x3::validator`
---
import Link from '@docusaurus/Link';

<Link id="0x3_validator"/>


-  [Struct `ValidatorMetadata`](#0x3_validator_ValidatorMetadata)
-  [Struct `Validator`](#0x3_validator_Validator)
-  [Struct `StakingRequestEvent`](#0x3_validator_StakingRequestEvent)
-  [Struct `UnstakingRequestEvent`](#0x3_validator_UnstakingRequestEvent)
-  [Constants](#@Constants_0)
-  [Function `new_metadata`](#0x3_validator_new_metadata)
-  [Function `new`](#0x3_validator_new)
-  [Function `deactivate`](#0x3_validator_deactivate)
-  [Function `activate`](#0x3_validator_activate)
-  [Function `adjust_stake_and_gas_price`](#0x3_validator_adjust_stake_and_gas_price)
-  [Function `request_add_stake`](#0x3_validator_request_add_stake)
-  [Function `request_add_stake_at_genesis`](#0x3_validator_request_add_stake_at_genesis)
-  [Function `request_add_stake_at_genesis_with_receipt`](#0x3_validator_request_add_stake_at_genesis_with_receipt)
-  [Function `request_withdraw_stake`](#0x3_validator_request_withdraw_stake)
-  [Function `request_set_gas_price`](#0x3_validator_request_set_gas_price)
-  [Function `set_candidate_gas_price`](#0x3_validator_set_candidate_gas_price)
-  [Function `request_set_commission_rate`](#0x3_validator_request_set_commission_rate)
-  [Function `set_candidate_commission_rate`](#0x3_validator_set_candidate_commission_rate)
-  [Function `deposit_stake_rewards`](#0x3_validator_deposit_stake_rewards)
-  [Function `process_pending_stakes_and_withdraws`](#0x3_validator_process_pending_stakes_and_withdraws)
-  [Function `is_preactive`](#0x3_validator_is_preactive)
-  [Function `metadata`](#0x3_validator_metadata)
-  [Function `iota_address`](#0x3_validator_iota_address)
-  [Function `name`](#0x3_validator_name)
-  [Function `description`](#0x3_validator_description)
-  [Function `image_url`](#0x3_validator_image_url)
-  [Function `project_url`](#0x3_validator_project_url)
-  [Function `network_address`](#0x3_validator_network_address)
-  [Function `p2p_address`](#0x3_validator_p2p_address)
-  [Function `primary_address`](#0x3_validator_primary_address)
-  [Function `worker_address`](#0x3_validator_worker_address)
-  [Function `protocol_pubkey_bytes`](#0x3_validator_protocol_pubkey_bytes)
-  [Function `proof_of_possession`](#0x3_validator_proof_of_possession)
-  [Function `network_pubkey_bytes`](#0x3_validator_network_pubkey_bytes)
-  [Function `worker_pubkey_bytes`](#0x3_validator_worker_pubkey_bytes)
-  [Function `next_epoch_network_address`](#0x3_validator_next_epoch_network_address)
-  [Function `next_epoch_p2p_address`](#0x3_validator_next_epoch_p2p_address)
-  [Function `next_epoch_primary_address`](#0x3_validator_next_epoch_primary_address)
-  [Function `next_epoch_worker_address`](#0x3_validator_next_epoch_worker_address)
-  [Function `next_epoch_protocol_pubkey_bytes`](#0x3_validator_next_epoch_protocol_pubkey_bytes)
-  [Function `next_epoch_proof_of_possession`](#0x3_validator_next_epoch_proof_of_possession)
-  [Function `next_epoch_network_pubkey_bytes`](#0x3_validator_next_epoch_network_pubkey_bytes)
-  [Function `next_epoch_worker_pubkey_bytes`](#0x3_validator_next_epoch_worker_pubkey_bytes)
-  [Function `operation_cap_id`](#0x3_validator_operation_cap_id)
-  [Function `next_epoch_gas_price`](#0x3_validator_next_epoch_gas_price)
-  [Function `total_stake_amount`](#0x3_validator_total_stake_amount)
-  [Function `stake_amount`](#0x3_validator_stake_amount)
-  [Function `total_stake`](#0x3_validator_total_stake)
-  [Function `voting_power`](#0x3_validator_voting_power)
-  [Function `set_voting_power`](#0x3_validator_set_voting_power)
-  [Function `pending_stake_amount`](#0x3_validator_pending_stake_amount)
-  [Function `pending_stake_withdraw_amount`](#0x3_validator_pending_stake_withdraw_amount)
-  [Function `gas_price`](#0x3_validator_gas_price)
-  [Function `commission_rate`](#0x3_validator_commission_rate)
-  [Function `pool_token_exchange_rate_at_epoch`](#0x3_validator_pool_token_exchange_rate_at_epoch)
-  [Function `staking_pool_id`](#0x3_validator_staking_pool_id)
-  [Function `is_duplicate`](#0x3_validator_is_duplicate)
-  [Function `is_equal_some_and_value`](#0x3_validator_is_equal_some_and_value)
-  [Function `is_equal_some`](#0x3_validator_is_equal_some)
-  [Function `new_unverified_validator_operation_cap_and_transfer`](#0x3_validator_new_unverified_validator_operation_cap_and_transfer)
-  [Function `update_name`](#0x3_validator_update_name)
-  [Function `update_description`](#0x3_validator_update_description)
-  [Function `update_image_url`](#0x3_validator_update_image_url)
-  [Function `update_project_url`](#0x3_validator_update_project_url)
-  [Function `update_next_epoch_network_address`](#0x3_validator_update_next_epoch_network_address)
-  [Function `update_candidate_network_address`](#0x3_validator_update_candidate_network_address)
-  [Function `update_next_epoch_p2p_address`](#0x3_validator_update_next_epoch_p2p_address)
-  [Function `update_candidate_p2p_address`](#0x3_validator_update_candidate_p2p_address)
-  [Function `update_next_epoch_primary_address`](#0x3_validator_update_next_epoch_primary_address)
-  [Function `update_candidate_primary_address`](#0x3_validator_update_candidate_primary_address)
-  [Function `update_next_epoch_worker_address`](#0x3_validator_update_next_epoch_worker_address)
-  [Function `update_candidate_worker_address`](#0x3_validator_update_candidate_worker_address)
-  [Function `update_next_epoch_protocol_pubkey`](#0x3_validator_update_next_epoch_protocol_pubkey)
-  [Function `update_candidate_protocol_pubkey`](#0x3_validator_update_candidate_protocol_pubkey)
-  [Function `update_next_epoch_network_pubkey`](#0x3_validator_update_next_epoch_network_pubkey)
-  [Function `update_candidate_network_pubkey`](#0x3_validator_update_candidate_network_pubkey)
-  [Function `update_next_epoch_worker_pubkey`](#0x3_validator_update_next_epoch_worker_pubkey)
-  [Function `update_candidate_worker_pubkey`](#0x3_validator_update_candidate_worker_pubkey)
-  [Function `effectuate_staged_metadata`](#0x3_validator_effectuate_staged_metadata)
-  [Function `validate_metadata`](#0x3_validator_validate_metadata)
-  [Function `validate_metadata_bcs`](#0x3_validator_validate_metadata_bcs)
-  [Function `get_staking_pool_ref`](#0x3_validator_get_staking_pool_ref)
-  [Function `new_from_metadata`](#0x3_validator_new_from_metadata)


<pre><code>
<b>use</b> <Link to="../move-stdlib/ascii#0x1_ascii">0x1::ascii</Link>;
<b>use</b> <Link to="../move-stdlib/bcs#0x1_bcs">0x1::bcs</Link>;
<b>use</b> <Link to="../move-stdlib/option#0x1_option">0x1::option</Link>;
<b>use</b> <Link to="../move-stdlib/string#0x1_string">0x1::string</Link>;
<b>use</b> <Link to="../iota-framework/bag#0x2_bag">0x2::bag</Link>;
<b>use</b> <Link to="../iota-framework/balance#0x2_balance">0x2::balance</Link>;
<b>use</b> <Link to="../iota-framework/event#0x2_event">0x2::event</Link>;
<b>use</b> <Link to="../iota-framework/iota#0x2_iota">0x2::iota</Link>;
<b>use</b> <Link to="../iota-framework/object#0x2_object">0x2::object</Link>;
<b>use</b> <Link to="../iota-framework/transfer#0x2_transfer">0x2::transfer</Link>;
<b>use</b> <Link to="../iota-framework/tx_context#0x2_tx_context">0x2::tx_context</Link>;
<b>use</b> <Link to="../iota-framework/url#0x2_url">0x2::url</Link>;
<b>use</b> <Link to="staking_pool#0x3_staking_pool">0x3::staking_pool</Link>;
<b>use</b> <Link to="validator_cap#0x3_validator_cap">0x3::validator_cap</Link>;
</code></pre>



<Link id="0x3_validator_ValidatorMetadata"></Link>

## Struct `ValidatorMetadata`



<pre><code>
<b>struct</b> <Link to="validator#0x3_validator_ValidatorMetadata">ValidatorMetadata</Link> <b>has</b> store
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
iota_address: <b>address</b></code>
</dt>
<dd>
 The Iota Address of the validator. This is the sender that created the Validator object,
 and also the address to send validator/coins to during withdraws.
</dd>
<dt>
<code>
protocol_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;</code>
</dt>
<dd>
 The public key bytes corresponding to the private key that the validator
 holds to sign transactions. For now, this is the same as AuthorityName.
</dd>
<dt>
<code>
network_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;</code>
</dt>
<dd>
 The public key bytes corresponding to the private key that the validator
 uses to establish TLS connections
</dd>
<dt>
<code>
worker_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;</code>
</dt>
<dd>
 The public key bytes correstponding to the Narwhal Worker
</dd>
<dt>
<code>
proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;</code>
</dt>
<dd>
 This is a proof that the validator has ownership of the private key
</dd>
<dt>
<code>
name: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link></code>
</dt>
<dd>
 A unique human-readable name of this validator.
</dd>
<dt>
<code>
description: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link></code>
</dt>
<dd>

</dd>
<dt>
<code>
image_url: <Link to="../iota-framework/url#0x2_url_Url">url::Url</Link></code>
</dt>
<dd>

</dd>
<dt>
<code>
project_url: <Link to="../iota-framework/url#0x2_url_Url">url::Url</Link></code>
</dt>
<dd>

</dd>
<dt>
<code>
net_address: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link></code>
</dt>
<dd>
 The network address of the validator (could also contain extra info such as port, DNS and etc.).
</dd>
<dt>
<code>
p2p_address: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link></code>
</dt>
<dd>
 The address of the validator used for p2p activities such as state sync (could also contain extra info such as port, DNS and etc.).
</dd>
<dt>
<code>
primary_address: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link></code>
</dt>
<dd>
 The address of the narwhal primary
</dd>
<dt>
<code>
worker_address: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link></code>
</dt>
<dd>
 The address of the narwhal worker
</dd>
<dt>
<code>
next_epoch_protocol_pubkey_bytes: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;</code>
</dt>
<dd>
 "next_epoch" metadata only takes effects in the next epoch.
 If none, current value will stay unchanged.
</dd>
<dt>
<code>
next_epoch_proof_of_possession: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;</code>
</dt>
<dd>

</dd>
<dt>
<code>
next_epoch_network_pubkey_bytes: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;</code>
</dt>
<dd>

</dd>
<dt>
<code>
next_epoch_worker_pubkey_bytes: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;</code>
</dt>
<dd>

</dd>
<dt>
<code>
next_epoch_net_address: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>&gt;</code>
</dt>
<dd>

</dd>
<dt>
<code>
next_epoch_p2p_address: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>&gt;</code>
</dt>
<dd>

</dd>
<dt>
<code>
next_epoch_primary_address: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>&gt;</code>
</dt>
<dd>

</dd>
<dt>
<code>
next_epoch_worker_address: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>&gt;</code>
</dt>
<dd>

</dd>
<dt>
<code>
extra_fields: <Link to="../iota-framework/bag#0x2_bag_Bag">bag::Bag</Link></code>
</dt>
<dd>
 Any extra fields that's not defined statically.
</dd>
</dl>


</details>

<Link id="0x3_validator_Validator"></Link>

## Struct `Validator`



<pre><code>
<b>struct</b> <Link to="validator#0x3_validator_Validator">Validator</Link> <b>has</b> store
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
metadata: <Link to="validator#0x3_validator_ValidatorMetadata">validator::ValidatorMetadata</Link></code>
</dt>
<dd>
 Summary of the validator.
</dd>
<dt>
<code>
<Link to="voting_power#0x3_voting_power">voting_power</Link>: u64</code>
</dt>
<dd>
 The voting power of this validator, which might be different from its
 stake amount.
</dd>
<dt>
<code>
operation_cap_id: <Link to="../iota-framework/object#0x2_object_ID">object::ID</Link></code>
</dt>
<dd>
 The ID of this validator's current valid <code>
UnverifiedValidatorOperationCap</code>
</dd>
<dt>
<code>
gas_price: u64</code>
</dt>
<dd>
 Gas price quote, updated only at end of epoch.
</dd>
<dt>
<code>
<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>: <Link to="staking_pool#0x3_staking_pool_StakingPool">staking_pool::StakingPool</Link></code>
</dt>
<dd>
 Staking pool for this validator.
</dd>
<dt>
<code>
commission_rate: u64</code>
</dt>
<dd>
 Commission rate of the validator, in basis point.
</dd>
<dt>
<code>
next_epoch_stake: u64</code>
</dt>
<dd>
 Total amount of stake that would be active in the next epoch.
</dd>
<dt>
<code>
next_epoch_gas_price: u64</code>
</dt>
<dd>
 This validator's gas price quote for the next epoch.
</dd>
<dt>
<code>
next_epoch_commission_rate: u64</code>
</dt>
<dd>
 The commission rate of the validator starting the next epoch, in basis point.
</dd>
<dt>
<code>
extra_fields: <Link to="../iota-framework/bag#0x2_bag_Bag">bag::Bag</Link></code>
</dt>
<dd>
 Any extra fields that's not defined statically.
</dd>
</dl>


</details>

<Link id="0x3_validator_StakingRequestEvent"></Link>

## Struct `StakingRequestEvent`

Event emitted when a new stake request is received.


<pre><code>
<b>struct</b> <Link to="validator#0x3_validator_StakingRequestEvent">StakingRequestEvent</Link> <b>has</b> <b>copy</b>, drop
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
pool_id: <Link to="../iota-framework/object#0x2_object_ID">object::ID</Link></code>
</dt>
<dd>

</dd>
<dt>
<code>
validator_address: <b>address</b></code>
</dt>
<dd>

</dd>
<dt>
<code>
staker_address: <b>address</b></code>
</dt>
<dd>

</dd>
<dt>
<code>
epoch: u64</code>
</dt>
<dd>

</dd>
<dt>
<code>
amount: u64</code>
</dt>
<dd>

</dd>
</dl>


</details>

<Link id="0x3_validator_UnstakingRequestEvent"></Link>

## Struct `UnstakingRequestEvent`

Event emitted when a new unstake request is received.


<pre><code>
<b>struct</b> <Link to="validator#0x3_validator_UnstakingRequestEvent">UnstakingRequestEvent</Link> <b>has</b> <b>copy</b>, drop
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
pool_id: <Link to="../iota-framework/object#0x2_object_ID">object::ID</Link></code>
</dt>
<dd>

</dd>
<dt>
<code>
validator_address: <b>address</b></code>
</dt>
<dd>

</dd>
<dt>
<code>
staker_address: <b>address</b></code>
</dt>
<dd>

</dd>
<dt>
<code>
stake_activation_epoch: u64</code>
</dt>
<dd>

</dd>
<dt>
<code>
unstaking_epoch: u64</code>
</dt>
<dd>

</dd>
<dt>
<code>
principal_amount: u64</code>
</dt>
<dd>

</dd>
<dt>
<code>
reward_amount: u64</code>
</dt>
<dd>

</dd>
</dl>


</details>

<Link id="@Constants_0"></Link>

## Constants


<Link id="0x3_validator_ECalledDuringNonGenesis"></Link>

Function called during non-genesis times.


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_ECalledDuringNonGenesis">ECalledDuringNonGenesis</Link>: u64 = 12;
</code></pre>



<Link id="0x3_validator_ECommissionRateTooHigh"></Link>

Commission rate set by the validator is higher than the threshold


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_ECommissionRateTooHigh">ECommissionRateTooHigh</Link>: u64 = 8;
</code></pre>



<Link id="0x3_validator_EGasPriceHigherThanThreshold"></Link>

Validator trying to set gas price higher than threshold.


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EGasPriceHigherThanThreshold">EGasPriceHigherThanThreshold</Link>: u64 = 102;
</code></pre>



<Link id="0x3_validator_EInvalidCap"></Link>

Capability code is not valid


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EInvalidCap">EInvalidCap</Link>: u64 = 101;
</code></pre>



<Link id="0x3_validator_EInvalidProofOfPossession"></Link>

Invalid proof_of_possession field in ValidatorMetadata


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EInvalidProofOfPossession">EInvalidProofOfPossession</Link>: u64 = 0;
</code></pre>



<Link id="0x3_validator_EInvalidStakeAmount"></Link>

Stake amount is invalid or wrong.


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EInvalidStakeAmount">EInvalidStakeAmount</Link>: u64 = 11;
</code></pre>



<Link id="0x3_validator_EMetadataInvalidNetAddr"></Link>

Invalid net_address field in ValidatorMetadata


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EMetadataInvalidNetAddr">EMetadataInvalidNetAddr</Link>: u64 = 4;
</code></pre>



<Link id="0x3_validator_EMetadataInvalidNetPubkey"></Link>

Invalid network_pubkey_bytes field in ValidatorMetadata


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EMetadataInvalidNetPubkey">EMetadataInvalidNetPubkey</Link>: u64 = 2;
</code></pre>



<Link id="0x3_validator_EMetadataInvalidP2pAddr"></Link>

Invalid p2p_address field in ValidatorMetadata


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EMetadataInvalidP2pAddr">EMetadataInvalidP2pAddr</Link>: u64 = 5;
</code></pre>



<Link id="0x3_validator_EMetadataInvalidPrimaryAddr"></Link>

Invalid primary_address field in ValidatorMetadata


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EMetadataInvalidPrimaryAddr">EMetadataInvalidPrimaryAddr</Link>: u64 = 6;
</code></pre>



<Link id="0x3_validator_EMetadataInvalidPubkey"></Link>

Invalid pubkey_bytes field in ValidatorMetadata


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EMetadataInvalidPubkey">EMetadataInvalidPubkey</Link>: u64 = 1;
</code></pre>



<Link id="0x3_validator_EMetadataInvalidWorkerAddr"></Link>

Invalidworker_address field in ValidatorMetadata


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EMetadataInvalidWorkerAddr">EMetadataInvalidWorkerAddr</Link>: u64 = 7;
</code></pre>



<Link id="0x3_validator_EMetadataInvalidWorkerPubkey"></Link>

Invalid worker_pubkey_bytes field in ValidatorMetadata


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EMetadataInvalidWorkerPubkey">EMetadataInvalidWorkerPubkey</Link>: u64 = 3;
</code></pre>



<Link id="0x3_validator_ENewCapNotCreatedByValidatorItself"></Link>

New Capability is not created by the validator itself


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_ENewCapNotCreatedByValidatorItself">ENewCapNotCreatedByValidatorItself</Link>: u64 = 100;
</code></pre>



<Link id="0x3_validator_ENotValidatorCandidate"></Link>

Intended validator is not a candidate one.


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_ENotValidatorCandidate">ENotValidatorCandidate</Link>: u64 = 10;
</code></pre>



<Link id="0x3_validator_EValidatorMetadataExceedingLengthLimit"></Link>

Validator Metadata is too long


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>: u64 = 9;
</code></pre>



<Link id="0x3_validator_MAX_COMMISSION_RATE"></Link>



<pre><code>
<b>const</b> <Link to="validator#0x3_validator_MAX_COMMISSION_RATE">MAX_COMMISSION_RATE</Link>: u64 = 2000;
</code></pre>



<Link id="0x3_validator_MAX_VALIDATOR_GAS_PRICE"></Link>

Max gas price a validator can set is 100K MICROS.


<pre><code>
<b>const</b> <Link to="validator#0x3_validator_MAX_VALIDATOR_GAS_PRICE">MAX_VALIDATOR_GAS_PRICE</Link>: u64 = 100000;
</code></pre>



<Link id="0x3_validator_MAX_VALIDATOR_METADATA_LENGTH"></Link>



<pre><code>
<b>const</b> <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>: u64 = 256;
</code></pre>



<Link id="0x3_validator_new_metadata"></Link>

## Function `new_metadata`



<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_new_metadata">new_metadata</Link>(iota_address: <b>address</b>, protocol_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, network_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, worker_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, name: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link>, description: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link>, image_url: <Link to="../iota-framework/url#0x2_url_Url">url::Url</Link>, project_url: <Link to="../iota-framework/url#0x2_url_Url">url::Url</Link>, net_address: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link>, p2p_address: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link>, primary_address: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link>, worker_address: <Link to="../move-stdlib/string#0x1_string_String">string::String</Link>, extra_fields: <Link to="../iota-framework/bag#0x2_bag_Bag">bag::Bag</Link>): <Link to="validator#0x3_validator_ValidatorMetadata">validator::ValidatorMetadata</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_new_metadata">new_metadata</Link>(
    iota_address: <b>address</b>,
    protocol_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    network_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    worker_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    name: String,
    description: String,
    image_url: Url,
    project_url: Url,
    net_address: String,
    p2p_address: String,
    primary_address: String,
    worker_address: String,
    extra_fields: Bag,
): <Link to="validator#0x3_validator_ValidatorMetadata">ValidatorMetadata</Link> \{
    <b>let</b> metadata = <Link to="validator#0x3_validator_ValidatorMetadata">ValidatorMetadata</Link> \{
        iota_address,
        protocol_pubkey_bytes,
        network_pubkey_bytes,
        worker_pubkey_bytes,
        proof_of_possession,
        name,
        description,
        image_url,
        project_url,
        net_address,
        p2p_address,
        primary_address,
        worker_address,
        next_epoch_protocol_pubkey_bytes: <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>(),
        next_epoch_network_pubkey_bytes: <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>(),
        next_epoch_worker_pubkey_bytes: <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>(),
        next_epoch_proof_of_possession: <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>(),
        next_epoch_net_address: <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>(),
        next_epoch_p2p_address: <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>(),
        next_epoch_primary_address: <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>(),
        next_epoch_worker_address: <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>(),
        extra_fields,
    };
    metadata
}
</code></pre>



</details>

<Link id="0x3_validator_new"></Link>

## Function `new`



<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_new">new</Link>(iota_address: <b>address</b>, protocol_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, network_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, worker_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, name: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, description: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, image_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, project_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, net_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, gas_price: u64, commission_rate: u64, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="validator#0x3_validator_Validator">validator::Validator</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_new">new</Link>(
    iota_address: <b>address</b>,
    protocol_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    network_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    worker_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    name: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    description: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    image_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    project_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    net_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    gas_price: u64,
    commission_rate: u64,
    ctx: &<b>mut</b> TxContext
): <Link to="validator#0x3_validator_Validator">Validator</Link> \{
    <b>assert</b>!(
        net_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>
            && p2p_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>
            && primary_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>
            && worker_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>
            && name.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>
            && description.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>
            && image_url.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>
            && project_url.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    <b>assert</b>!(<Link to="validator#0x3_validator_commission_rate">commission_rate</Link> &lt;= <Link to="validator#0x3_validator_MAX_COMMISSION_RATE">MAX_COMMISSION_RATE</Link>, <Link to="validator#0x3_validator_ECommissionRateTooHigh">ECommissionRateTooHigh</Link>);
    <b>assert</b>!(<Link to="validator#0x3_validator_gas_price">gas_price</Link> &lt; <Link to="validator#0x3_validator_MAX_VALIDATOR_GAS_PRICE">MAX_VALIDATOR_GAS_PRICE</Link>, <Link to="validator#0x3_validator_EGasPriceHigherThanThreshold">EGasPriceHigherThanThreshold</Link>);

    <b>let</b> metadata = <Link to="validator#0x3_validator_new_metadata">new_metadata</Link>(
        iota_address,
        protocol_pubkey_bytes,
        network_pubkey_bytes,
        worker_pubkey_bytes,
        proof_of_possession,
        name.to_ascii_string().to_string(),
        description.to_ascii_string().to_string(),
        <Link to="../iota-framework/url#0x2_url_new_unsafe_from_bytes">url::new_unsafe_from_bytes</Link>(image_url),
        <Link to="../iota-framework/url#0x2_url_new_unsafe_from_bytes">url::new_unsafe_from_bytes</Link>(project_url),
        net_address.to_ascii_string().to_string(),
        p2p_address.to_ascii_string().to_string(),
        primary_address.to_ascii_string().to_string(),
        worker_address.to_ascii_string().to_string(),
        <Link to="../iota-framework/bag#0x2_bag_new">bag::new</Link>(ctx),
    );

    // Checks that the keys & addresses & PoP are valid.
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&metadata);

    <Link to="validator#0x3_validator_new_from_metadata">new_from_metadata</Link>(
        metadata,
        gas_price,
        commission_rate,
        ctx
    )
}
</code></pre>



</details>

<Link id="0x3_validator_deactivate"></Link>

## Function `deactivate`

Deactivate this validator's staking pool


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_deactivate">deactivate</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, deactivation_epoch: u64)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_deactivate">deactivate</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, deactivation_epoch: u64) \{
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.deactivate_staking_pool(deactivation_epoch)
}
</code></pre>



</details>

<Link id="0x3_validator_activate"></Link>

## Function `activate`



<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_activate">activate</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, activation_epoch: u64)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_activate">activate</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, activation_epoch: u64) \{
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.activate_staking_pool(activation_epoch);
}
</code></pre>



</details>

<Link id="0x3_validator_adjust_stake_and_gas_price"></Link>

## Function `adjust_stake_and_gas_price`

Process pending stake and pending withdraws, and update the gas price.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_adjust_stake_and_gas_price">adjust_stake_and_gas_price</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_adjust_stake_and_gas_price">adjust_stake_and_gas_price</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>) \{
    self.gas_price = self.next_epoch_gas_price;
    self.commission_rate = self.next_epoch_commission_rate;
}
</code></pre>



</details>

<Link id="0x3_validator_request_add_stake"></Link>

## Function `request_add_stake`

Request to add stake to the validator's staking pool, processed at the end of the epoch.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_request_add_stake">request_add_stake</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, stake: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;, staker_address: <b>address</b>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="staking_pool#0x3_staking_pool_StakedIota">staking_pool::StakedIota</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_request_add_stake">request_add_stake</Link>(
    self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>,
    stake: Balance&lt;IOTA&gt;,
    staker_address: <b>address</b>,
    ctx: &<b>mut</b> TxContext,
) : StakedIota \{
    <b>let</b> stake_amount = stake.value();
    <b>assert</b>!(stake_amount &gt; 0, <Link to="validator#0x3_validator_EInvalidStakeAmount">EInvalidStakeAmount</Link>);
    <b>let</b> stake_epoch = ctx.epoch() + 1;
    <b>let</b> staked_iota = self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.<Link to="validator#0x3_validator_request_add_stake">request_add_stake</Link>(stake, stake_epoch, ctx);
    // Process stake right away <b>if</b> staking pool is preactive.
    <b>if</b> (self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>()) \{
        self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.process_pending_stake();
    };
    self.next_epoch_stake = self.next_epoch_stake + stake_amount;
    <Link to="../iota-framework/event#0x2_event_emit">event::emit</Link>(
        <Link to="validator#0x3_validator_StakingRequestEvent">StakingRequestEvent</Link> \{
            pool_id: <Link to="validator#0x3_validator_staking_pool_id">staking_pool_id</Link>(self),
            validator_address: self.metadata.iota_address,
            staker_address,
            epoch: ctx.epoch(),
            amount: stake_amount,
        }
    );
    staked_iota
}
</code></pre>



</details>

<Link id="0x3_validator_request_add_stake_at_genesis"></Link>

## Function `request_add_stake_at_genesis`

Request to add stake to the validator's staking pool at genesis


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_request_add_stake_at_genesis">request_add_stake_at_genesis</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, stake: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;, staker_address: <b>address</b>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_request_add_stake_at_genesis">request_add_stake_at_genesis</Link>(
    self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>,
    stake: Balance&lt;IOTA&gt;,
    staker_address: <b>address</b>,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> staked_iota = <Link to="validator#0x3_validator_request_add_stake_at_genesis_with_receipt">request_add_stake_at_genesis_with_receipt</Link>(
        self,
        stake,
        ctx
    );
    <Link to="../iota-framework/transfer#0x2_transfer_public_transfer">transfer::public_transfer</Link>(staked_iota, staker_address);
}
</code></pre>



</details>

<Link id="0x3_validator_request_add_stake_at_genesis_with_receipt"></Link>

## Function `request_add_stake_at_genesis_with_receipt`

Internal request to add stake to the validator's staking pool at genesis.
Returns a StakedIota


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_request_add_stake_at_genesis_with_receipt">request_add_stake_at_genesis_with_receipt</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, stake: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="staking_pool#0x3_staking_pool_StakedIota">staking_pool::StakedIota</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_request_add_stake_at_genesis_with_receipt">request_add_stake_at_genesis_with_receipt</Link>(
    self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>,
    stake: Balance&lt;IOTA&gt;,
    ctx: &<b>mut</b> TxContext,
) : StakedIota \{
    <b>assert</b>!(ctx.epoch() == 0, <Link to="validator#0x3_validator_ECalledDuringNonGenesis">ECalledDuringNonGenesis</Link>);
    <b>let</b> stake_amount = stake.value();
    <b>assert</b>!(stake_amount &gt; 0, <Link to="validator#0x3_validator_EInvalidStakeAmount">EInvalidStakeAmount</Link>);

    <b>let</b> staked_iota = self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.<Link to="validator#0x3_validator_request_add_stake">request_add_stake</Link>(
        stake,
        0, // epoch 0 -- <Link to="genesis#0x3_genesis">genesis</Link>
        ctx
    );

    // Process stake right away
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.process_pending_stake();
    self.next_epoch_stake = self.next_epoch_stake + stake_amount;

    staked_iota
}
</code></pre>



</details>

<Link id="0x3_validator_request_withdraw_stake"></Link>

## Function `request_withdraw_stake`

Request to withdraw stake from the validator's staking pool, processed at the end of the epoch.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_request_withdraw_stake">request_withdraw_stake</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, staked_iota: <Link to="staking_pool#0x3_staking_pool_StakedIota">staking_pool::StakedIota</Link>, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_request_withdraw_stake">request_withdraw_stake</Link>(
    self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>,
    staked_iota: StakedIota,
    ctx: &TxContext,
) : Balance&lt;IOTA&gt; \{
    <b>let</b> principal_amount = staked_iota.staked_iota_amount();
    <b>let</b> stake_activation_epoch = staked_iota.stake_activation_epoch();
    <b>let</b> withdrawn_stake = self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.<Link to="validator#0x3_validator_request_withdraw_stake">request_withdraw_stake</Link>(staked_iota, ctx);
    <b>let</b> withdraw_amount = withdrawn_stake.value();
    <b>let</b> reward_amount = withdraw_amount - principal_amount;
    self.next_epoch_stake = self.next_epoch_stake - withdraw_amount;
    <Link to="../iota-framework/event#0x2_event_emit">event::emit</Link>(
        <Link to="validator#0x3_validator_UnstakingRequestEvent">UnstakingRequestEvent</Link> \{
            pool_id: <Link to="validator#0x3_validator_staking_pool_id">staking_pool_id</Link>(self),
            validator_address: self.metadata.iota_address,
            staker_address: ctx.sender(),
            stake_activation_epoch,
            unstaking_epoch: ctx.epoch(),
            principal_amount,
            reward_amount,
        }
    );
    withdrawn_stake
}
</code></pre>



</details>

<Link id="0x3_validator_request_set_gas_price"></Link>

## Function `request_set_gas_price`

Request to set new gas price for the next epoch.
Need to present a <code>
ValidatorOperationCap</code>.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_request_set_gas_price">request_set_gas_price</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, verified_cap: <Link to="validator_cap#0x3_validator_cap_ValidatorOperationCap">validator_cap::ValidatorOperationCap</Link>, new_price: u64)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_request_set_gas_price">request_set_gas_price</Link>(
    self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>,
    verified_cap: ValidatorOperationCap,
    new_price: u64,
) \{
    <b>assert</b>!(new_price &lt; <Link to="validator#0x3_validator_MAX_VALIDATOR_GAS_PRICE">MAX_VALIDATOR_GAS_PRICE</Link>, <Link to="validator#0x3_validator_EGasPriceHigherThanThreshold">EGasPriceHigherThanThreshold</Link>);
    <b>let</b> validator_address = *verified_cap.verified_operation_cap_address();
    <b>assert</b>!(validator_address == self.metadata.iota_address, <Link to="validator#0x3_validator_EInvalidCap">EInvalidCap</Link>);
    self.next_epoch_gas_price = new_price;
}
</code></pre>



</details>

<Link id="0x3_validator_set_candidate_gas_price"></Link>

## Function `set_candidate_gas_price`

Set new gas price for the candidate validator.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_set_candidate_gas_price">set_candidate_gas_price</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, verified_cap: <Link to="validator_cap#0x3_validator_cap_ValidatorOperationCap">validator_cap::ValidatorOperationCap</Link>, new_price: u64)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_set_candidate_gas_price">set_candidate_gas_price</Link>(
    self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>,
    verified_cap: ValidatorOperationCap,
    new_price: u64
) \{
    <b>assert</b>!(<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self), <Link to="validator#0x3_validator_ENotValidatorCandidate">ENotValidatorCandidate</Link>);
    <b>assert</b>!(new_price &lt; <Link to="validator#0x3_validator_MAX_VALIDATOR_GAS_PRICE">MAX_VALIDATOR_GAS_PRICE</Link>, <Link to="validator#0x3_validator_EGasPriceHigherThanThreshold">EGasPriceHigherThanThreshold</Link>);
    <b>let</b> validator_address = *verified_cap.verified_operation_cap_address();
    <b>assert</b>!(validator_address == self.metadata.iota_address, <Link to="validator#0x3_validator_EInvalidCap">EInvalidCap</Link>);
    self.next_epoch_gas_price = new_price;
    self.gas_price = new_price;
}
</code></pre>



</details>

<Link id="0x3_validator_request_set_commission_rate"></Link>

## Function `request_set_commission_rate`

Request to set new commission rate for the next epoch.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_request_set_commission_rate">request_set_commission_rate</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, new_commission_rate: u64)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_request_set_commission_rate">request_set_commission_rate</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, new_commission_rate: u64) \{
    <b>assert</b>!(new_commission_rate &lt;= <Link to="validator#0x3_validator_MAX_COMMISSION_RATE">MAX_COMMISSION_RATE</Link>, <Link to="validator#0x3_validator_ECommissionRateTooHigh">ECommissionRateTooHigh</Link>);
    self.next_epoch_commission_rate = new_commission_rate;
}
</code></pre>



</details>

<Link id="0x3_validator_set_candidate_commission_rate"></Link>

## Function `set_candidate_commission_rate`

Set new commission rate for the candidate validator.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_set_candidate_commission_rate">set_candidate_commission_rate</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, new_commission_rate: u64)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_set_candidate_commission_rate">set_candidate_commission_rate</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, new_commission_rate: u64) \{
    <b>assert</b>!(<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self), <Link to="validator#0x3_validator_ENotValidatorCandidate">ENotValidatorCandidate</Link>);
    <b>assert</b>!(new_commission_rate &lt;= <Link to="validator#0x3_validator_MAX_COMMISSION_RATE">MAX_COMMISSION_RATE</Link>, <Link to="validator#0x3_validator_ECommissionRateTooHigh">ECommissionRateTooHigh</Link>);
    self.commission_rate = new_commission_rate;
}
</code></pre>



</details>

<Link id="0x3_validator_deposit_stake_rewards"></Link>

## Function `deposit_stake_rewards`

Deposit stakes rewards into the validator's staking pool, called at the end of the epoch.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_deposit_stake_rewards">deposit_stake_rewards</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, reward: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_deposit_stake_rewards">deposit_stake_rewards</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, reward: Balance&lt;IOTA&gt;) \{
    self.next_epoch_stake = self.next_epoch_stake + reward.value();
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.deposit_rewards(reward);
}
</code></pre>



</details>

<Link id="0x3_validator_process_pending_stakes_and_withdraws"></Link>

## Function `process_pending_stakes_and_withdraws`

Process pending stakes and withdraws, called at the end of the epoch.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_process_pending_stakes_and_withdraws">process_pending_stakes_and_withdraws</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_process_pending_stakes_and_withdraws">process_pending_stakes_and_withdraws</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, ctx: &TxContext) \{
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.<Link to="validator#0x3_validator_process_pending_stakes_and_withdraws">process_pending_stakes_and_withdraws</Link>(ctx);
    <b>assert</b>!(<Link to="validator#0x3_validator_stake_amount">stake_amount</Link>(self) == self.next_epoch_stake, <Link to="validator#0x3_validator_EInvalidStakeAmount">EInvalidStakeAmount</Link>);
}
</code></pre>



</details>

<Link id="0x3_validator_is_preactive"></Link>

## Function `is_preactive`

Returns true if the validator is preactive.


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): bool
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): bool \{
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>()
}
</code></pre>



</details>

<Link id="0x3_validator_metadata"></Link>

## Function `metadata`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_metadata">metadata</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="validator#0x3_validator_ValidatorMetadata">validator::ValidatorMetadata</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_metadata">metadata</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &<Link to="validator#0x3_validator_ValidatorMetadata">ValidatorMetadata</Link> \{
    &self.metadata
}
</code></pre>



</details>

<Link id="0x3_validator_iota_address"></Link>

## Function `iota_address`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_iota_address">iota_address</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): <b>address</b>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_iota_address">iota_address</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): <b>address</b> \{
    self.metadata.iota_address
}
</code></pre>



</details>

<Link id="0x3_validator_name"></Link>

## Function `name`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_name">name</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_name">name</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &String \{
    &self.metadata.name
}
</code></pre>



</details>

<Link id="0x3_validator_description"></Link>

## Function `description`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_description">description</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_description">description</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &String \{
    &self.metadata.description
}
</code></pre>



</details>

<Link id="0x3_validator_image_url"></Link>

## Function `image_url`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_image_url">image_url</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../iota-framework/url#0x2_url_Url">url::Url</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_image_url">image_url</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &Url \{
    &self.metadata.image_url
}
</code></pre>



</details>

<Link id="0x3_validator_project_url"></Link>

## Function `project_url`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_project_url">project_url</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../iota-framework/url#0x2_url_Url">url::Url</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_project_url">project_url</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &Url \{
    &self.metadata.project_url
}
</code></pre>



</details>

<Link id="0x3_validator_network_address"></Link>

## Function `network_address`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_network_address">network_address</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_network_address">network_address</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &String \{
    &self.metadata.net_address
}
</code></pre>



</details>

<Link id="0x3_validator_p2p_address"></Link>

## Function `p2p_address`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_p2p_address">p2p_address</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_p2p_address">p2p_address</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &String \{
    &self.metadata.p2p_address
}
</code></pre>



</details>

<Link id="0x3_validator_primary_address"></Link>

## Function `primary_address`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_primary_address">primary_address</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_primary_address">primary_address</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &String \{
    &self.metadata.primary_address
}
</code></pre>



</details>

<Link id="0x3_validator_worker_address"></Link>

## Function `worker_address`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_worker_address">worker_address</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_worker_address">worker_address</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &String \{
    &self.metadata.worker_address
}
</code></pre>



</details>

<Link id="0x3_validator_protocol_pubkey_bytes"></Link>

## Function `protocol_pubkey_bytes`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_protocol_pubkey_bytes">protocol_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_protocol_pubkey_bytes">protocol_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt; \{
    &self.metadata.protocol_pubkey_bytes
}
</code></pre>



</details>

<Link id="0x3_validator_proof_of_possession"></Link>

## Function `proof_of_possession`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_proof_of_possession">proof_of_possession</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_proof_of_possession">proof_of_possession</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt; \{
    &self.metadata.proof_of_possession
}
</code></pre>



</details>

<Link id="0x3_validator_network_pubkey_bytes"></Link>

## Function `network_pubkey_bytes`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_network_pubkey_bytes">network_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_network_pubkey_bytes">network_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt; \{
    &self.metadata.network_pubkey_bytes
}
</code></pre>



</details>

<Link id="0x3_validator_worker_pubkey_bytes"></Link>

## Function `worker_pubkey_bytes`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_worker_pubkey_bytes">worker_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_worker_pubkey_bytes">worker_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt; \{
    &self.metadata.worker_pubkey_bytes
}
</code></pre>



</details>

<Link id="0x3_validator_next_epoch_network_address"></Link>

## Function `next_epoch_network_address`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_network_address">next_epoch_network_address</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_network_address">next_epoch_network_address</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &Option&lt;String&gt; \{
    &self.metadata.next_epoch_net_address
}
</code></pre>



</details>

<Link id="0x3_validator_next_epoch_p2p_address"></Link>

## Function `next_epoch_p2p_address`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_p2p_address">next_epoch_p2p_address</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_p2p_address">next_epoch_p2p_address</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &Option&lt;String&gt; \{
    &self.metadata.next_epoch_p2p_address
}
</code></pre>



</details>

<Link id="0x3_validator_next_epoch_primary_address"></Link>

## Function `next_epoch_primary_address`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_primary_address">next_epoch_primary_address</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_primary_address">next_epoch_primary_address</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &Option&lt;String&gt; \{
    &self.metadata.next_epoch_primary_address
}
</code></pre>



</details>

<Link id="0x3_validator_next_epoch_worker_address"></Link>

## Function `next_epoch_worker_address`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_worker_address">next_epoch_worker_address</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/string#0x1_string_String">string::String</Link>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_worker_address">next_epoch_worker_address</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &Option&lt;String&gt; \{
    &self.metadata.next_epoch_worker_address
}
</code></pre>



</details>

<Link id="0x3_validator_next_epoch_protocol_pubkey_bytes"></Link>

## Function `next_epoch_protocol_pubkey_bytes`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_protocol_pubkey_bytes">next_epoch_protocol_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_protocol_pubkey_bytes">next_epoch_protocol_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &Option&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt; \{
    &self.metadata.next_epoch_protocol_pubkey_bytes
}
</code></pre>



</details>

<Link id="0x3_validator_next_epoch_proof_of_possession"></Link>

## Function `next_epoch_proof_of_possession`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_proof_of_possession">next_epoch_proof_of_possession</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_proof_of_possession">next_epoch_proof_of_possession</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &Option&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt; \{
    &self.metadata.next_epoch_proof_of_possession
}
</code></pre>



</details>

<Link id="0x3_validator_next_epoch_network_pubkey_bytes"></Link>

## Function `next_epoch_network_pubkey_bytes`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_network_pubkey_bytes">next_epoch_network_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_network_pubkey_bytes">next_epoch_network_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &Option&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt; \{
    &self.metadata.next_epoch_network_pubkey_bytes
}
</code></pre>



</details>

<Link id="0x3_validator_next_epoch_worker_pubkey_bytes"></Link>

## Function `next_epoch_worker_pubkey_bytes`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_worker_pubkey_bytes">next_epoch_worker_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_worker_pubkey_bytes">next_epoch_worker_pubkey_bytes</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &Option&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt; \{
    &self.metadata.next_epoch_worker_pubkey_bytes
}
</code></pre>



</details>

<Link id="0x3_validator_operation_cap_id"></Link>

## Function `operation_cap_id`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_operation_cap_id">operation_cap_id</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="../iota-framework/object#0x2_object_ID">object::ID</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_operation_cap_id">operation_cap_id</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): &ID \{
    &self.operation_cap_id
}
</code></pre>



</details>

<Link id="0x3_validator_next_epoch_gas_price"></Link>

## Function `next_epoch_gas_price`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_gas_price">next_epoch_gas_price</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_next_epoch_gas_price">next_epoch_gas_price</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): u64 \{
    self.next_epoch_gas_price
}
</code></pre>



</details>

<Link id="0x3_validator_total_stake_amount"></Link>

## Function `total_stake_amount`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_total_stake_amount">total_stake_amount</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_total_stake_amount">total_stake_amount</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): u64 \{
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.iota_balance()
}
</code></pre>



</details>

<Link id="0x3_validator_stake_amount"></Link>

## Function `stake_amount`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_stake_amount">stake_amount</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_stake_amount">stake_amount</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): u64 \{
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.iota_balance()
}
</code></pre>



</details>

<Link id="0x3_validator_total_stake"></Link>

## Function `total_stake`

Return the total amount staked with this validator


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_total_stake">total_stake</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_total_stake">total_stake</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): u64 \{
    <Link to="validator#0x3_validator_stake_amount">stake_amount</Link>(self)
}
</code></pre>



</details>

<Link id="0x3_validator_voting_power"></Link>

## Function `voting_power`

Return the voting power of this validator.


<pre><code>
<b>public</b> <b>fun</b> <Link to="voting_power#0x3_voting_power">voting_power</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="voting_power#0x3_voting_power">voting_power</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): u64 \{
    self.<Link to="voting_power#0x3_voting_power">voting_power</Link>
}
</code></pre>



</details>

<Link id="0x3_validator_set_voting_power"></Link>

## Function `set_voting_power`

Set the voting power of this validator, called only from validator_set.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_set_voting_power">set_voting_power</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, new_voting_power: u64)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_set_voting_power">set_voting_power</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, new_voting_power: u64) \{
    self.<Link to="voting_power#0x3_voting_power">voting_power</Link> = new_voting_power;
}
</code></pre>



</details>

<Link id="0x3_validator_pending_stake_amount"></Link>

## Function `pending_stake_amount`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_pending_stake_amount">pending_stake_amount</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_pending_stake_amount">pending_stake_amount</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): u64 \{
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.<Link to="validator#0x3_validator_pending_stake_amount">pending_stake_amount</Link>()
}
</code></pre>



</details>

<Link id="0x3_validator_pending_stake_withdraw_amount"></Link>

## Function `pending_stake_withdraw_amount`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_pending_stake_withdraw_amount">pending_stake_withdraw_amount</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_pending_stake_withdraw_amount">pending_stake_withdraw_amount</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): u64 \{
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.<Link to="validator#0x3_validator_pending_stake_withdraw_amount">pending_stake_withdraw_amount</Link>()
}
</code></pre>



</details>

<Link id="0x3_validator_gas_price"></Link>

## Function `gas_price`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_gas_price">gas_price</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_gas_price">gas_price</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): u64 \{
    self.gas_price
}
</code></pre>



</details>

<Link id="0x3_validator_commission_rate"></Link>

## Function `commission_rate`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_commission_rate">commission_rate</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_commission_rate">commission_rate</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): u64 \{
    self.commission_rate
}
</code></pre>



</details>

<Link id="0x3_validator_pool_token_exchange_rate_at_epoch"></Link>

## Function `pool_token_exchange_rate_at_epoch`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_pool_token_exchange_rate_at_epoch">pool_token_exchange_rate_at_epoch</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>, epoch: u64): <Link to="staking_pool#0x3_staking_pool_PoolTokenExchangeRate">staking_pool::PoolTokenExchangeRate</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_pool_token_exchange_rate_at_epoch">pool_token_exchange_rate_at_epoch</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>, epoch: u64): PoolTokenExchangeRate \{
    self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>.<Link to="validator#0x3_validator_pool_token_exchange_rate_at_epoch">pool_token_exchange_rate_at_epoch</Link>(epoch)
}
</code></pre>



</details>

<Link id="0x3_validator_staking_pool_id"></Link>

## Function `staking_pool_id`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_staking_pool_id">staking_pool_id</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): <Link to="../iota-framework/object#0x2_object_ID">object::ID</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_staking_pool_id">staking_pool_id</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>): ID \{
    <Link to="../iota-framework/object#0x2_object_id">object::id</Link>(&self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>)
}
</code></pre>



</details>

<Link id="0x3_validator_is_duplicate"></Link>

## Function `is_duplicate`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_is_duplicate">is_duplicate</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>, other: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): bool
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_is_duplicate">is_duplicate</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>, other: &<Link to="validator#0x3_validator_Validator">Validator</Link>): bool \{
     self.metadata.iota_address == other.metadata.iota_address
        || self.metadata.name == other.metadata.name
        || self.metadata.net_address == other.metadata.net_address
        || self.metadata.p2p_address == other.metadata.p2p_address
        || self.metadata.protocol_pubkey_bytes == other.metadata.protocol_pubkey_bytes
        || self.metadata.network_pubkey_bytes == other.metadata.network_pubkey_bytes
        || self.metadata.network_pubkey_bytes == other.metadata.worker_pubkey_bytes
        || self.metadata.worker_pubkey_bytes == other.metadata.worker_pubkey_bytes
        || self.metadata.worker_pubkey_bytes == other.metadata.network_pubkey_bytes
        // All next epoch parameters.
        || <Link to="validator#0x3_validator_is_equal_some">is_equal_some</Link>(&self.metadata.next_epoch_net_address, &other.metadata.next_epoch_net_address)
        || <Link to="validator#0x3_validator_is_equal_some">is_equal_some</Link>(&self.metadata.next_epoch_p2p_address, &other.metadata.next_epoch_p2p_address)
        || <Link to="validator#0x3_validator_is_equal_some">is_equal_some</Link>(&self.metadata.next_epoch_protocol_pubkey_bytes, &other.metadata.next_epoch_protocol_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some">is_equal_some</Link>(&self.metadata.next_epoch_network_pubkey_bytes, &other.metadata.next_epoch_network_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some">is_equal_some</Link>(&self.metadata.next_epoch_network_pubkey_bytes, &other.metadata.next_epoch_worker_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some">is_equal_some</Link>(&self.metadata.next_epoch_worker_pubkey_bytes, &other.metadata.next_epoch_worker_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some">is_equal_some</Link>(&self.metadata.next_epoch_worker_pubkey_bytes, &other.metadata.next_epoch_network_pubkey_bytes)
        // My next epoch parameters <b>with</b> other current epoch parameters.
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&self.metadata.next_epoch_net_address, &other.metadata.net_address)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&self.metadata.next_epoch_p2p_address, &other.metadata.p2p_address)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&self.metadata.next_epoch_protocol_pubkey_bytes, &other.metadata.protocol_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&self.metadata.next_epoch_network_pubkey_bytes, &other.metadata.network_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&self.metadata.next_epoch_network_pubkey_bytes, &other.metadata.worker_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&self.metadata.next_epoch_worker_pubkey_bytes, &other.metadata.worker_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&self.metadata.next_epoch_worker_pubkey_bytes, &other.metadata.network_pubkey_bytes)
        // Other next epoch parameters <b>with</b> my current epoch parameters.
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&other.metadata.next_epoch_net_address, &self.metadata.net_address)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&other.metadata.next_epoch_p2p_address, &self.metadata.p2p_address)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&other.metadata.next_epoch_protocol_pubkey_bytes, &self.metadata.protocol_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&other.metadata.next_epoch_network_pubkey_bytes, &self.metadata.network_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&other.metadata.next_epoch_network_pubkey_bytes, &self.metadata.worker_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&other.metadata.next_epoch_worker_pubkey_bytes, &self.metadata.worker_pubkey_bytes)
        || <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>(&other.metadata.next_epoch_worker_pubkey_bytes, &self.metadata.network_pubkey_bytes)
}
</code></pre>



</details>

<Link id="0x3_validator_is_equal_some_and_value"></Link>

## Function `is_equal_some_and_value`



<pre><code>
<b>fun</b> <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>&lt;T&gt;(a: &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;T&gt;, b: &T): bool
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="validator#0x3_validator_is_equal_some_and_value">is_equal_some_and_value</Link>&lt;T&gt;(a: &Option&lt;T&gt;, b: &T): bool \{
    <b>if</b> (a.is_none()) \{
        <b>false</b>
    } <b>else</b> \{
        a.borrow() == b
    }
}
</code></pre>



</details>

<Link id="0x3_validator_is_equal_some"></Link>

## Function `is_equal_some`



<pre><code>
<b>fun</b> <Link to="validator#0x3_validator_is_equal_some">is_equal_some</Link>&lt;T&gt;(a: &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;T&gt;, b: &<Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;T&gt;): bool
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="validator#0x3_validator_is_equal_some">is_equal_some</Link>&lt;T&gt;(a: &Option&lt;T&gt;, b: &Option&lt;T&gt;): bool \{
    <b>if</b> (a.is_none() || b.is_none()) \{
        <b>false</b>
    } <b>else</b> \{
        a.borrow() == b.borrow()
    }
}
</code></pre>



</details>

<Link id="0x3_validator_new_unverified_validator_operation_cap_and_transfer"></Link>

## Function `new_unverified_validator_operation_cap_and_transfer`

Create a new <code>
UnverifiedValidatorOperationCap</code>, transfer to the validator,
and registers it, thus revoking the previous cap's permission.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_new_unverified_validator_operation_cap_and_transfer">new_unverified_validator_operation_cap_and_transfer</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_new_unverified_validator_operation_cap_and_transfer">new_unverified_validator_operation_cap_and_transfer</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, ctx: &<b>mut</b> TxContext) \{
    <b>let</b> <b>address</b> = ctx.sender();
    <b>assert</b>!(<b>address</b> == self.metadata.iota_address, <Link to="validator#0x3_validator_ENewCapNotCreatedByValidatorItself">ENewCapNotCreatedByValidatorItself</Link>);
    <b>let</b> new_id = <Link to="validator_cap#0x3_validator_cap_new_unverified_validator_operation_cap_and_transfer">validator_cap::new_unverified_validator_operation_cap_and_transfer</Link>(<b>address</b>, ctx);
    self.operation_cap_id = new_id;
}
</code></pre>



</details>

<Link id="0x3_validator_update_name"></Link>

## Function `update_name`

Update name of the validator.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_name">update_name</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, name: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_name">update_name</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, name: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(
        name.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    self.metadata.name = name.to_ascii_string().to_string();
}
</code></pre>



</details>

<Link id="0x3_validator_update_description"></Link>

## Function `update_description`

Update description of the validator.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_description">update_description</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, description: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_description">update_description</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, description: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(
        description.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    self.metadata.description = description.to_ascii_string().to_string();
}
</code></pre>



</details>

<Link id="0x3_validator_update_image_url"></Link>

## Function `update_image_url`

Update image url of the validator.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_image_url">update_image_url</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, image_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_image_url">update_image_url</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, image_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(
        image_url.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    self.metadata.image_url = <Link to="../iota-framework/url#0x2_url_new_unsafe_from_bytes">url::new_unsafe_from_bytes</Link>(image_url);
}
</code></pre>



</details>

<Link id="0x3_validator_update_project_url"></Link>

## Function `update_project_url`

Update project url of the validator.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_project_url">update_project_url</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, project_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_project_url">update_project_url</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, project_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(
        project_url.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    self.metadata.project_url = <Link to="../iota-framework/url#0x2_url_new_unsafe_from_bytes">url::new_unsafe_from_bytes</Link>(project_url);
}
</code></pre>



</details>

<Link id="0x3_validator_update_next_epoch_network_address"></Link>

## Function `update_next_epoch_network_address`

Update network address of this validator, taking effects from next epoch


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_network_address">update_next_epoch_network_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, net_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_network_address">update_next_epoch_network_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, net_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(
        net_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    <b>let</b> net_address = net_address.to_ascii_string().to_string();
    self.metadata.next_epoch_net_address = <Link to="../move-stdlib/option#0x1_option_some">option::some</Link>(net_address);
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_candidate_network_address"></Link>

## Function `update_candidate_network_address`

Update network address of this candidate validator


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_network_address">update_candidate_network_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, net_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_network_address">update_candidate_network_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, net_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self), <Link to="validator#0x3_validator_ENotValidatorCandidate">ENotValidatorCandidate</Link>);
    <b>assert</b>!(
        net_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    <b>let</b> net_address = net_address.to_ascii_string().to_string();
    self.metadata.net_address = net_address;
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_next_epoch_p2p_address"></Link>

## Function `update_next_epoch_p2p_address`

Update p2p address of this validator, taking effects from next epoch


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_p2p_address">update_next_epoch_p2p_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_p2p_address">update_next_epoch_p2p_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(
        p2p_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    <b>let</b> p2p_address = p2p_address.to_ascii_string().to_string();
    self.metadata.next_epoch_p2p_address = <Link to="../move-stdlib/option#0x1_option_some">option::some</Link>(p2p_address);
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_candidate_p2p_address"></Link>

## Function `update_candidate_p2p_address`

Update p2p address of this candidate validator


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_p2p_address">update_candidate_p2p_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_p2p_address">update_candidate_p2p_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self), <Link to="validator#0x3_validator_ENotValidatorCandidate">ENotValidatorCandidate</Link>);
    <b>assert</b>!(
        p2p_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    <b>let</b> p2p_address = p2p_address.to_ascii_string().to_string();
    self.metadata.p2p_address = p2p_address;
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_next_epoch_primary_address"></Link>

## Function `update_next_epoch_primary_address`

Update primary address of this validator, taking effects from next epoch


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_primary_address">update_next_epoch_primary_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_primary_address">update_next_epoch_primary_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(
        primary_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    <b>let</b> primary_address = primary_address.to_ascii_string().to_string();
    self.metadata.next_epoch_primary_address = <Link to="../move-stdlib/option#0x1_option_some">option::some</Link>(primary_address);
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_candidate_primary_address"></Link>

## Function `update_candidate_primary_address`

Update primary address of this candidate validator


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_primary_address">update_candidate_primary_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_primary_address">update_candidate_primary_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self), <Link to="validator#0x3_validator_ENotValidatorCandidate">ENotValidatorCandidate</Link>);
    <b>assert</b>!(
        primary_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    <b>let</b> primary_address = primary_address.to_ascii_string().to_string();
    self.metadata.primary_address = primary_address;
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_next_epoch_worker_address"></Link>

## Function `update_next_epoch_worker_address`

Update worker address of this validator, taking effects from next epoch


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_worker_address">update_next_epoch_worker_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_worker_address">update_next_epoch_worker_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(
        worker_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    <b>let</b> worker_address = worker_address.to_ascii_string().to_string();
    self.metadata.next_epoch_worker_address = <Link to="../move-stdlib/option#0x1_option_some">option::some</Link>(worker_address);
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_candidate_worker_address"></Link>

## Function `update_candidate_worker_address`

Update worker address of this candidate validator


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_worker_address">update_candidate_worker_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_worker_address">update_candidate_worker_address</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self), <Link to="validator#0x3_validator_ENotValidatorCandidate">ENotValidatorCandidate</Link>);
    <b>assert</b>!(
        worker_address.length() &lt;= <Link to="validator#0x3_validator_MAX_VALIDATOR_METADATA_LENGTH">MAX_VALIDATOR_METADATA_LENGTH</Link>,
        <Link to="validator#0x3_validator_EValidatorMetadataExceedingLengthLimit">EValidatorMetadataExceedingLengthLimit</Link>
    );
    <b>let</b> worker_address = worker_address.to_ascii_string().to_string();
    self.metadata.worker_address = worker_address;
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_next_epoch_protocol_pubkey"></Link>

## Function `update_next_epoch_protocol_pubkey`

Update protocol public key of this validator, taking effects from next epoch


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_protocol_pubkey">update_next_epoch_protocol_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, protocol_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_protocol_pubkey">update_next_epoch_protocol_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, protocol_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    self.metadata.next_epoch_protocol_pubkey_bytes = <Link to="../move-stdlib/option#0x1_option_some">option::some</Link>(protocol_pubkey);
    self.metadata.next_epoch_proof_of_possession = <Link to="../move-stdlib/option#0x1_option_some">option::some</Link>(proof_of_possession);
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_candidate_protocol_pubkey"></Link>

## Function `update_candidate_protocol_pubkey`

Update protocol public key of this candidate validator


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_protocol_pubkey">update_candidate_protocol_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, protocol_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_protocol_pubkey">update_candidate_protocol_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, protocol_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self), <Link to="validator#0x3_validator_ENotValidatorCandidate">ENotValidatorCandidate</Link>);
    self.metadata.protocol_pubkey_bytes = protocol_pubkey;
    self.metadata.proof_of_possession = proof_of_possession;
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_next_epoch_network_pubkey"></Link>

## Function `update_next_epoch_network_pubkey`

Update network public key of this validator, taking effects from next epoch


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_network_pubkey">update_next_epoch_network_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, network_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_network_pubkey">update_next_epoch_network_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, network_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    self.metadata.next_epoch_network_pubkey_bytes = <Link to="../move-stdlib/option#0x1_option_some">option::some</Link>(network_pubkey);
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_candidate_network_pubkey"></Link>

## Function `update_candidate_network_pubkey`

Update network public key of this candidate validator


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_network_pubkey">update_candidate_network_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, network_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_network_pubkey">update_candidate_network_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, network_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self), <Link to="validator#0x3_validator_ENotValidatorCandidate">ENotValidatorCandidate</Link>);
    self.metadata.network_pubkey_bytes = network_pubkey;
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_next_epoch_worker_pubkey"></Link>

## Function `update_next_epoch_worker_pubkey`

Update Narwhal worker public key of this validator, taking effects from next epoch


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_worker_pubkey">update_next_epoch_worker_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, worker_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_next_epoch_worker_pubkey">update_next_epoch_worker_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, worker_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    self.metadata.next_epoch_worker_pubkey_bytes = <Link to="../move-stdlib/option#0x1_option_some">option::some</Link>(worker_pubkey);
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_update_candidate_worker_pubkey"></Link>

## Function `update_candidate_worker_pubkey`

Update Narwhal worker public key of this candidate validator


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_worker_pubkey">update_candidate_worker_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>, worker_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_update_candidate_worker_pubkey">update_candidate_worker_pubkey</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>, worker_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;) \{
    <b>assert</b>!(<Link to="validator#0x3_validator_is_preactive">is_preactive</Link>(self), <Link to="validator#0x3_validator_ENotValidatorCandidate">ENotValidatorCandidate</Link>);
    self.metadata.worker_pubkey_bytes = worker_pubkey;
    <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(&self.metadata);
}
</code></pre>



</details>

<Link id="0x3_validator_effectuate_staged_metadata"></Link>

## Function `effectuate_staged_metadata`

Effectutate all staged next epoch metadata for this validator.
NOTE: this function SHOULD ONLY be called by validator_set when
advancing an epoch.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_effectuate_staged_metadata">effectuate_staged_metadata</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">validator::Validator</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_effectuate_staged_metadata">effectuate_staged_metadata</Link>(self: &<b>mut</b> <Link to="validator#0x3_validator_Validator">Validator</Link>) \{
    <b>if</b> (<Link to="validator#0x3_validator_next_epoch_network_address">next_epoch_network_address</Link>(self).is_some()) \{
        self.metadata.net_address = self.metadata.next_epoch_net_address.extract();
        self.metadata.next_epoch_net_address = <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>();
    };

    <b>if</b> (<Link to="validator#0x3_validator_next_epoch_p2p_address">next_epoch_p2p_address</Link>(self).is_some()) \{
        self.metadata.p2p_address = self.metadata.next_epoch_p2p_address.extract();
        self.metadata.next_epoch_p2p_address = <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>();
    };

    <b>if</b> (<Link to="validator#0x3_validator_next_epoch_primary_address">next_epoch_primary_address</Link>(self).is_some()) \{
        self.metadata.primary_address = self.metadata.next_epoch_primary_address.extract();
        self.metadata.next_epoch_primary_address = <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>();
    };

    <b>if</b> (<Link to="validator#0x3_validator_next_epoch_worker_address">next_epoch_worker_address</Link>(self).is_some()) \{
        self.metadata.worker_address = self.metadata.next_epoch_worker_address.extract();
        self.metadata.next_epoch_worker_address = <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>();
    };

    <b>if</b> (<Link to="validator#0x3_validator_next_epoch_protocol_pubkey_bytes">next_epoch_protocol_pubkey_bytes</Link>(self).is_some()) \{
        self.metadata.protocol_pubkey_bytes = self.metadata.next_epoch_protocol_pubkey_bytes.extract();
        self.metadata.next_epoch_protocol_pubkey_bytes = <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>();
        self.metadata.proof_of_possession = self.metadata.next_epoch_proof_of_possession.extract();
        self.metadata.next_epoch_proof_of_possession = <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>();
    };

    <b>if</b> (<Link to="validator#0x3_validator_next_epoch_network_pubkey_bytes">next_epoch_network_pubkey_bytes</Link>(self).is_some()) \{
        self.metadata.network_pubkey_bytes = self.metadata.next_epoch_network_pubkey_bytes.extract();
        self.metadata.next_epoch_network_pubkey_bytes = <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>();
    };

    <b>if</b> (<Link to="validator#0x3_validator_next_epoch_worker_pubkey_bytes">next_epoch_worker_pubkey_bytes</Link>(self).is_some()) \{
        self.metadata.worker_pubkey_bytes = self.metadata.next_epoch_worker_pubkey_bytes.extract();
        self.metadata.next_epoch_worker_pubkey_bytes = <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>();
    };
}
</code></pre>



</details>

<Link id="0x3_validator_validate_metadata"></Link>

## Function `validate_metadata`

Aborts if validator metadata is valid


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(metadata: &<Link to="validator#0x3_validator_ValidatorMetadata">validator::ValidatorMetadata</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_validate_metadata">validate_metadata</Link>(metadata: &<Link to="validator#0x3_validator_ValidatorMetadata">ValidatorMetadata</Link>) \{
    <Link to="validator#0x3_validator_validate_metadata_bcs">validate_metadata_bcs</Link>(<Link to="../move-stdlib/bcs#0x1_bcs_to_bytes">bcs::to_bytes</Link>(metadata));
}
</code></pre>



</details>

<Link id="0x3_validator_validate_metadata_bcs"></Link>

## Function `validate_metadata_bcs`



<pre><code>
<b>public</b> <b>fun</b> <Link to="validator#0x3_validator_validate_metadata_bcs">validate_metadata_bcs</Link>(metadata: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>native</b> <b>fun</b> <Link to="validator#0x3_validator_validate_metadata_bcs">validate_metadata_bcs</Link>(metadata: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;);
</code></pre>



</details>

<Link id="0x3_validator_get_staking_pool_ref"></Link>

## Function `get_staking_pool_ref`



<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="validator#0x3_validator_get_staking_pool_ref">get_staking_pool_ref</Link>(self: &<Link to="validator#0x3_validator_Validator">validator::Validator</Link>): &<Link to="staking_pool#0x3_staking_pool_StakingPool">staking_pool::StakingPool</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="validator#0x3_validator_get_staking_pool_ref">get_staking_pool_ref</Link>(self: &<Link to="validator#0x3_validator_Validator">Validator</Link>) : &StakingPool \{
    &self.<Link to="staking_pool#0x3_staking_pool">staking_pool</Link>
}
</code></pre>



</details>

<Link id="0x3_validator_new_from_metadata"></Link>

## Function `new_from_metadata`

Create a new validator from the given <code>
<Link to="validator#0x3_validator_ValidatorMetadata">ValidatorMetadata</Link></code>, called by both <code>
new</code> and <code>
new_for_testing</code>.


<pre><code>
<b>fun</b> <Link to="validator#0x3_validator_new_from_metadata">new_from_metadata</Link>(metadata: <Link to="validator#0x3_validator_ValidatorMetadata">validator::ValidatorMetadata</Link>, gas_price: u64, commission_rate: u64, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="validator#0x3_validator_Validator">validator::Validator</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="validator#0x3_validator_new_from_metadata">new_from_metadata</Link>(
    metadata: <Link to="validator#0x3_validator_ValidatorMetadata">ValidatorMetadata</Link>,
    gas_price: u64,
    commission_rate: u64,
    ctx: &<b>mut</b> TxContext
): <Link to="validator#0x3_validator_Validator">Validator</Link> \{
    <b>let</b> iota_address = metadata.iota_address;

    <b>let</b> <Link to="staking_pool#0x3_staking_pool">staking_pool</Link> = <Link to="staking_pool#0x3_staking_pool_new">staking_pool::new</Link>(ctx);

    <b>let</b> operation_cap_id = <Link to="validator_cap#0x3_validator_cap_new_unverified_validator_operation_cap_and_transfer">validator_cap::new_unverified_validator_operation_cap_and_transfer</Link>(iota_address, ctx);
    <Link to="validator#0x3_validator_Validator">Validator</Link> \{
        metadata,
        // Initialize the voting power <b>to</b> be 0.
        // At the epoch change <b>where</b> this <Link to="validator#0x3_validator">validator</Link> is actually added <b>to</b> the
        // active <Link to="validator#0x3_validator">validator</Link> set, the voting power will be updated accordingly.
        <Link to="voting_power#0x3_voting_power">voting_power</Link>: 0,
        operation_cap_id,
        gas_price,
        <Link to="staking_pool#0x3_staking_pool">staking_pool</Link>,
        commission_rate,
        next_epoch_stake: 0,
        next_epoch_gas_price: gas_price,
        next_epoch_commission_rate: commission_rate,
        extra_fields: <Link to="../iota-framework/bag#0x2_bag_new">bag::new</Link>(ctx),
    }
}
</code></pre>



</details>
