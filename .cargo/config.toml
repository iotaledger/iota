[alias]
ci-fmt = "fmt --check"
ci-fmt-external = "ci-fmt --manifest-path external-crates/move/Cargo.toml --all"
ci-clippy = "clippy --all-targets --all-features -- -D warnings"
ci-clippy-external = [
  "clippy",
  "--manifest-path",
  "external-crates/move/Cargo.toml",
  "--",
  "-Aclippy::upper_case_acronyms",
  "-Aclippy::type_complexity",
  "-Aclippy::new_without_default",
  "-Aclippy::box_default",
  "-Aclippy::manual_slice_size_calculation",
  "-Dwarnings",
]
ci-license = "license-template --template .license_template"

check-simtest = [
  "check",
  "--config", "build.rustflags = ['--cfg', 'msim']",
  "--config", "patch.crates-io.tokio.git = 'https://github.com/MystenLabs/mysten-sim.git'", 
  "--config", "patch.crates-io.tokio.rev = '6f88ec84644cb1a6809c010f1f534d0d09e0cd89'",
  "--config", "patch.crates-io.futures-timer.git = 'https://github.com/MystenLabs/mysten-sim.git'", 
  "--config", "patch.crates-io.futures-timer.rev = '6f88ec84644cb1a6809c010f1f534d0d09e0cd89'"
]

[build]
rustflags = ["-C", "force-frame-pointers=yes", "-C", "force-unwind-tables=yes"]

# 64 bit MSVC, override default 1M stack with 8M stack
[target.x86_64-pc-windows-msvc]
rustflags = [
  "-C",
  "link-arg=/STACK:8000000",
]
